(this.webpackJsonpbackend=this.webpackJsonpbackend||[]).push([[0],{109:function(e,t,a){e.exports=a(243)},114:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},243:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(93),c=a.n(l),o=(a(114),a(11)),i=(a(115),a(116),a(27)),s=a(6),m=a(5),u=a(4),d=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(u.a)(["card",a])},n),t)},f=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(u.a)(["card-title",a])},n),t)},p=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(u.a)(["card-content",a])},n),t)},g=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(u.a)(["card-action",a])},n),t)},E=function(e){var t=e.className,a=e.src,n=e.children,l=e.text,c=Object(m.a)(e,["className","src","children","text"]);return r.a.createElement("div",Object.assign({className:Object(u.a)(["card-image",t])},c),r.a.createElement("img",{src:a,alt:l}),n)},b=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(u.a)(["card-reveal",a])},n),t)},h=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(u.a)(["row",a])},n),t)},v=a(10),y=function(e){var t=e.sm,a=e.md,n=e.lg,r=e.smOffset,l=e.mdOffset,c=e.lgOffset,o=e.className,i="s".concat(t),s="m".concat(a),m="l".concat(n),d="offset-s".concat(r),f="offset-m".concat(l),p="offset-l".concat(c);return Object(u.a)(["col",Object(v.a)({},i,t),Object(v.a)({},s,a),Object(v.a)({},m,n),Object(v.a)({},d,r),Object(v.a)({},f,l),Object(v.a)({},p,c),o])},N=function(e){var t=e.children,a=Object(m.a)(e,["children"]);return r.a.createElement("div",{className:y(a)},t)},O=function(e){var t=e.title,a=e.count,n=e.children,l=e.className;return r.a.createElement(d,{className:l},r.a.createElement(p,null,r.a.createElement(h,null,r.a.createElement(N,{sm:7},r.a.createElement("span",{style:{display:"block",fontWeight:600}},t),r.a.createElement("span",{style:{fontWeight:500}},a)),r.a.createElement(N,{sm:5},n)),r.a.createElement(h,null,r.a.createElement(N,{sm:12},r.a.createElement("div",{className:"card-metric-change increase green-text"},r.a.createElement("i",{className:"material-icons left"},"keyboard_arrow_down"),"50%")))))},C=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("i",Object.assign({className:Object(u.a)(["material-icons",a])},n),t)},j={icon:{width:"50px",height:"50px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:"#fff"}},w=function(e){var t=e.children,a=e.className;return r.a.createElement(C,{className:Object(u.a)(["circle",a]),style:j.icon},t)},S=function(e){var t=e.customerCount;return r.a.createElement(O,{title:"Total Customers",count:t},r.a.createElement(w,{className:"green"},"people"))},k=function(e){var t=e.productCount;return r.a.createElement(O,{title:"Total Products",count:t},r.a.createElement(w,{className:"red"},"shopping_basket"))},x=function(e){var t=e.orderCount;return r.a.createElement(O,{title:"Total Order",count:t},r.a.createElement(w,{className:"indigo"},"insert_chart"))},A=a(1),P=a(94),R="#eeeeee",q={primary:"#1e88e5",secondary:"#2979ff"},D={responsive:!0,animation:!1,cornerRadius:20,tooltips:{enabled:!0,mode:"index",intersect:!1,borderWidth:1,borderColor:R,backgroundColor:"#ffffff",titleFontColor:q.primary,bodyFontColor:q.secondary,footerFontColor:q.secondary},layout:{padding:0},scales:{xAxes:[{barThickness:12,maxBarThickness:10,barPercentage:.5,categoryPercentage:.5,ticks:{fontColor:q.secondary},gridLines:{display:!1,drawBorder:!1}}],yAxes:[{ticks:{fontColor:q.secondary,beginAtZero:!0,min:0},gridLines:{borderDash:[2],borderDashOffset:[2],color:R,drawBorder:!1,zeroLineBorderDash:[2],zeroLineBorderDashOffset:[2],zeroLineColor:R}}]}},F=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("button",Object.assign({className:Object(u.a)(["btn-floating waves-effect waves-light",a])},n),t)},T=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("button",Object.assign({style:{textTransform:"capitalize"},className:Object(u.a)(["btn waves-effect waves-light",a])},n),t)},B=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("button",Object.assign({style:{textTransform:"capitalize"},className:Object(u.a)(["btn waves-effect waves-light btn-flat product-btn",a])},n),t)},L=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("button",Object.assign({style:{textTransform:"capitalize"},className:Object(u.a)(["btn waves-effect waves-light btn-flat ",{"product-btn":!a},a])},n),t)},z=a(63),U=a.n(z),I=function(e,t){return U()(e).format(t||"DD-MM-YYYY")},_=function(e){return e.reduce((function(e,t){var a=e;return e.indexOf(t)>-1?e:(a.push(t),a)}),[])},Z={header:{display:"flex",justifyContent:"space-between"}},G=function(e){var t=e.sales,a=e.loadMore,n=e.loading,l=r.a.useState(),c=Object(A.a)(l,2),o=c[0],i=c[1],s=r.a.useState(0),m=Object(A.a)(s,2),u=m[0],g=m[1],E=Math.ceil(t.data.length/7);r.a.useEffect((function(){var e=function(){var e=7*u,a=e+7;return t.data.slice(e,a)}();i(function(e){return{labels:e.map((function(e){return I(e.createdAt,"Do MMM")})),datasets:[{label:"Sales",backgroundColor:"#3949ab",data:e.map((function(e){return e.qty}))},{label:"Profit($)",backgroundColor:"#e0e0e0",data:e.map((function(e){return e.profit}))}]}}(e))}),[u]);return r.a.createElement(r.a.Fragment,null,o&&r.a.createElement(d,null,r.a.createElement(p,null,r.a.createElement(f,{style:Z.header},"Total Sales & Profit",r.a.createElement("div",null,r.a.createElement(B,{disabled:0===u,onClick:function(){g((function(e){return e-1}))}},r.a.createElement(C,null,"chevron_left")),r.a.createElement(B,{disabled:u>=E-1,onClick:function(){g((function(e){return e+1}))}},r.a.createElement(C,null,"chevron_right")),t.meta.hasNext&&r.a.createElement(B,{disabled:n,onClick:function(){return a(t.meta.nextCursor)}},r.a.createElement(C,null,"more")))),r.a.createElement(P.a,{data:o,options:D}))))},J=a(3),Y=a(16),Q=a.n(Y),H=a(99),W=a.n(H),$=function(e){return W.a.create({baseURL:"https://nestjs-ecommerce-app.herokuapp.com/api/v1",headers:{authorization:"Bearer "+e}})},V=function(){var e={user:{role:""},access_token:""};try{return e=JSON.parse(localStorage.getItem("loggedIn_user"))}catch(t){return Ct({message:t.message,color:"red"}),console.log("error getting user ",t),e}},K=function(){return!!V()&&!!V().access_token},X=function(){return!!K()&&"Admin"===V().user.role},ee=function(){return!!K()&&"Customer"===V().user.role},te=function(){return V().access_token},ae=function(){return V().user},ne=function(){localStorage.removeItem("loggedIn_user")},re=[{name:"S/N",selector:"id",sortable:!0},{name:"Customer",selector:"customer",sortable:!0},{name:"Quantity",selector:"qty",sortable:!0},{name:"Status",selector:"status",sortable:!0},{name:"Amount($)",selector:"amount",sortable:!0},{name:"Date",selector:"createdAt",sortable:!0}],le=function(){var e=r.a.useState([]),t=Object(A.a)(e,2),a=t[0],n=t[1],l=r.a.useState(!1),c=Object(A.a)(l,2),o=c[0],i=c[1];return r.a.useEffect((function(){i(!0),$(te()).get("/orders",{params:{relation:!0}}).then((function(e){i(!1);var t=e.data.data.map((function(e,t){return Object(J.a)({},e,{customer:e.user.username,createdAt:I(e.createdAt),user:null,id:t+1})}));n(t)})).catch((function(e){i(!1),Ct({message:e.message,color:"red"})}))}),[]),r.a.createElement(r.a.Fragment,null,o&&r.a.createElement(Ot,null),!o&&r.a.createElement(d,null,r.a.createElement(p,null,r.a.createElement(Q.a,{title:"Orders Summary",columns:re,data:a,highlightOnHover:!0}))))},ce=function(){var e=Object(n.useState)(!1),t=Object(A.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(null),c=Object(A.a)(l,2),o=c[0],i=c[1],s=Object(n.useState)(null),m=Object(A.a)(s,2),u=m[0],d=m[1];return{makeGetRequest:function(e){var t=e.authToken,a=e.params,n=e.url;r(!0),$(t).get(n,{params:a}).then((function(e){r(!1),d(e.data)})).catch((function(e){r(!1),i(e),console.log(e)}))},setData:d,setError:i,setLoading:r,loading:a,error:o,data:u}},oe=function(){var e,t=r.a.useRef(null),a=ce(),n=a.makeGetRequest,l=a.data,c=a.loading,o=a.error;(r.a.useEffect((function(){var e={url:"/sales",authToken:te()};n(e)}),[]),l)&&(e=t.current?[].concat(Object(s.a)(t.current.data),Object(s.a)(l.data)):Object(s.a)(l.data),t.current={data:Object(s.a)(_(e)),meta:l.meta});return o&&Ct({message:o.message,color:"red",outDuration:500}),r.a.createElement(wt,null,c&&r.a.createElement(Ot,null),r.a.createElement(h,null,r.a.createElement(N,{sm:12,md:4},r.a.createElement(S,{customerCount:8473})),r.a.createElement(N,{sm:12,md:4},r.a.createElement(k,{productCount:632})),r.a.createElement(N,{sm:12,md:4},r.a.createElement(x,{orderCount:873}))),t.current&&t.current.data.length>0&&r.a.createElement(h,null,r.a.createElement(N,{sm:12},r.a.createElement(G,{loading:c,sales:t.current,loadMore:function(e){var t={url:"/sales",params:{cursor:e},authToken:te()};n(t)}}))),r.a.createElement(h,null,r.a.createElement(N,{sm:12},r.a.createElement(le,null))))},ie=function(){var e=Object(i.g)();r.a.useEffect((function(){return document.body.classList.remove("has-fixed-sidenav"),function(){document.body.classList.add("has-fixed-sidenav")}}));return r.a.createElement(qt,{handleSubmit:function(t,a){var n=a.setSubmitting;$().post("/auth/login",{username:t.username.trim(),password:t.password.trim()}).then((function(t){if(n(!1),"Customer"===t.data.user.role)return e.replace("/admin");!function(e){try{localStorage.setItem("loggedIn_user",JSON.stringify(e))}catch(t){Ct({message:t.message,color:"red"}),console.log("error parsing string ",t)}}(t.data),e.push("/admin/profile")})).catch((function(e){n(!1),console.log("error ",e.response),Ct({message:e.message,color:"red"})}))},adminRoute:!0})},se=function(e){var t=e.onClick,a=e.deleting;return r.a.createElement(T,{disabled:a,className:"tooltipped red-text btn-flat delete-btn","data-position":"left","data-tooltip":"Delete",style:{cursor:"pointer"},onClick:t},r.a.createElement(C,{children:"close"}))},me=[{name:"Username",selector:"username",sortable:!0},{name:"Email",selector:"email",sortable:!0},{name:"Date Joined",selector:"createdAt",sortable:!0,right:!0},{selector:"edit",right:!0}],ue=function(e){return r.a.createElement(T,{onClick:function(){return e()},className:"right-align indigo "},"Add")},de=function(e){var t=e.data,a=e.handleDelete,n=e.loading,l=e.openModal,c=t?function(e){return e.map((function(e){return Object(J.a)({},e,{createdAt:I(e.createdAt),edit:r.a.createElement(se,{key:e.id,deleting:n,onClick:function(){return a(e.id)}})})}))}(t):[];return r.a.createElement(d,null,r.a.createElement(Q.a,{title:"Employee List",columns:me,data:c,onSelectedRowsChange:function(e){},actions:ue(l),pagination:!0,noContextMenu:!0,onRowClicked:function(e){}}))},fe=a(2),pe=function(e){var t=e.id,a=e.labelClassName,n=e.styleLabel,l=e.label,c=Object(m.a)(e,["id","labelClassName","styleLabel","label"]);return r.a.createElement("div",{className:Object(u.a)(["input-field",{"login-label":n}])},r.a.createElement(fe.b,Object.assign({},c,{id:t})),t&&l&&r.a.createElement("label",{className:a,htmlFor:t},l))};pe.defaultProps={labelClassName:"active"};var ge=pe,Ee={login:{height:"100vh",marginBottom:0},header:{marginTop:0,padding:40},input:{padding:"5px 10px"}},be=function(e){var t=e.handleAdd,a=e.closeModal,n=r.a.useState(""),l=Object(A.a)(n,2),c=l[0],o=l[1];return r.a.createElement(wt,null,r.a.createElement(fe.d,{initialValues:{email:"",username:"",password:"",confirm:""},validate:function(e){o(e.password);var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)?e.username?e.password?e.password.length<6?t.password="Password length must be greater than 5":e.confirm!==c&&(t.confirm="Confirm password must match password field"):t.password="Password Required":t.username="Username Required":t.email="Invalid email address":t.email="Email Required",t},onSubmit:function(e,a){var n=a.setSubmitting,r={username:e.username,email:e.email,password:e.password,role:"Employee"};$(te()).post("/users",Object(J.a)({},r)).then((function(a){n(!1),Ct({message:"Employee Successfully Added",color:"green"});var r=Object(J.a)({},e,{},a.data);t(r)})).catch((function(e){n(!1),Ct({message:e.message,color:"red"}),console.log(e.response)}))}},(function(e){var t=e.isSubmitting,n=e.submitForm;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(Ot,null),r.a.createElement(fe.c,null,r.a.createElement(ge,{name:"email",label:"Email Address",id:"email",autoComplete:"off",autoFocus:!0,style:Ee.input}),r.a.createElement(fe.a,{name:"email",component:"div",style:{color:"red"}}),r.a.createElement(ge,{name:"username",label:"Username",id:"username",autoComplete:"off",autoFocus:!0,style:Ee.input}),r.a.createElement(fe.a,{name:"username",component:"div",style:{color:"red"}}),r.a.createElement(ge,{name:"password",id:"password",label:"Password",autoComplete:"off",style:Ee.input,type:"password"}),r.a.createElement(fe.a,{name:"password",component:"div",style:{color:"red"}}),r.a.createElement(ge,{name:"confirm",label:"Confirm Password",autoComplete:"off",id:"confirm",style:Ee.input,type:"password"}),r.a.createElement(fe.a,{name:"confirm",component:"div",style:{color:"red"}}),r.a.createElement("div",{className:" right-align"},r.a.createElement(B,{onClick:n,disabled:t,type:"submit"},"Submit"),r.a.createElement(B,{type:"button",onClick:a},"Cancel"))))})))},he=function(){var e=ce(),t=e.makeGetRequest,a=e.setData,n=e.data,l=e.loading,c=e.error,o=r.a.useState(!1),i=Object(A.a)(o,2),m=i[0],u=i[1],d=r.a.useRef(null);r.a.useEffect((function(){var e={url:"/users",params:{role:"Employee"},authToken:te()};t(e)}),[]),r.a.useEffect((function(){var e=document.querySelectorAll(".modal"),t=M.Modal.init(e);d.current=t[0];var a=document.querySelectorAll(".tooltipped");M.Tooltip.init(a)}));c&&Ct({message:c.message,color:"red",outDuration:500});var f=function(){d.current.close()};return r.a.createElement(wt,null,l&&r.a.createElement(Ot,null),m&&r.a.createElement(Ot,null),r.a.createElement(jt,{title:"Add Employee"},r.a.createElement(be,{handleAdd:function(e){f(),a((function(t){return Object(J.a)({},t,{data:[].concat(Object(s.a)(t.data),[e])})}))},closeModal:f})),r.a.createElement(de,{openModal:function(){d.current.open()},data:n?n.data:[],handleDelete:function(e){u(!0),$(te()).delete("/users/".concat(e)).then((function(t){u(!1),a((function(t){return Object(J.a)({},t,{data:t.data.filter((function(t){return t.id!==e}))})})),Ct({message:"Successfully Deleted",color:"green"})})).catch((function(e){u(!1),Ct({message:e.message,color:"red"})}))},loading:m}))},ve=[{name:"Username",selector:"username",sortable:!0},{name:"Email",selector:"email",sortable:!0},{name:"Address",selector:"address",sortable:!0},{name:"Date Joined",selector:"createdAt",sortable:!0}],ye={recipients:{resize:"auto"}},Ne=function(e){var t=e.closeModal,a=e.selectedRows,n=r.a.useState(a||" "),l=Object(A.a)(n,2),c=l[0],o=l[1],i=r.a.useState(""),s=Object(A.a)(i,2),m=s[0],u=s[1],d=r.a.useState(""),f=Object(A.a)(d,2),p=f[0],g=f[1],E=r.a.useState(!1),b=Object(A.a)(E,2),v=b[0],y=b[1];return r.a.useEffect((function(){o(a)}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(h,null,r.a.createElement(N,{sm:12,className:"input-field"},r.a.createElement("textarea",{id:"email-ids",className:"materialize-textarea",value:c||"",onChange:function(e){o(e.target.value)},style:ye.recipients}),r.a.createElement("label",{className:"active",htmlFor:"email-ids"},"Recipients"))),r.a.createElement(h,null,r.a.createElement(N,{sm:12,className:"input-field"},r.a.createElement("input",{id:"subject",type:"text",className:"validate",value:m,onChange:function(e){return u(e.target.value)}}),r.a.createElement("label",{htmlFor:"subject"},"Subject"))),r.a.createElement(h,null,r.a.createElement(N,{sm:12,className:"input-field"},r.a.createElement("textarea",{id:"message",className:"materialize-textarea",value:p,onChange:function(e){return g(e.target.value)}}),r.a.createElement("label",{htmlFor:"message"},"Message"))),v&&r.a.createElement(Ot,null),r.a.createElement("div",{className:"row right-align"},r.a.createElement(B,{onClick:function(){if(""!==m&&void 0!==m&&""!==p&&void 0!==p){var e;e=Array.isArray(c)?c:c.split(",");var a={name:"Tony Smith",email:"tonysmith@gmail.com",subject:m,recipients:e,message:p};y(!0),$(te()).post("/email",Object(J.a)({},a)).then((function(e){y(!1),Ct({message:"Email message successfully sent",color:"green"}),console.log("res",e),t()})).catch((function(e){y(!1),Ct({message:e.message,color:"red"}),console.log("error ",e.response)}))}else Ct({message:"Subject and message fields must be filled in",color:"red"})}},"Send"),r.a.createElement(B,{onClick:function(){return t()}},"Cancel")))},Oe=function(e){var t=e.closeModal,a=e.selectedRows;return r.a.createElement(jt,{title:"Send Email to Selected Customer(s)",id:"send-email-modal"},r.a.createElement(Ne,{closeModal:t,selectedRows:a}))},Ce=function(e){var t=e.handleLoadMore,a=e.loadingMore;return r.a.createElement(T,{disabled:a,onClick:t,className:"right indigo"},"Load more")},je=function(e){var t=e.openModal;return r.a.createElement(T,{className:"indigo",onClick:t},"Send Email")},we=function(e){var t=e.response,a=e.loadMore,n=e.loadingMore,l=t.data,c=t.meta,o=r.a.useState(null),s=Object(A.a)(o,2),m=s[0],u=s[1],f=r.a.useRef(null),p=Object(i.g)();r.a.useEffect((function(){var e=document.querySelectorAll(".modal"),t=M.Modal.init(e);f.current=t[0]}));var g=l.length>0?function(e){return e.map((function(e){return Object(J.a)({},e,{createdAt:I(e.createdAt)})}))}(l):[];return r.a.createElement(d,null,r.a.createElement(Oe,{closeModal:function(){f.current.close()},selectedRows:m&&m.selectedRows.map((function(e){return e.email}))}),r.a.createElement(Q.a,{title:"Customer List",columns:ve,data:g,actions:function(e){return e.hasNext}(c)&&r.a.createElement(Ce,{loadingMore:n,handleLoadMore:function(){a(c.nextCursor)}}),onSelectedRowsChange:function(e){u(e)},contextActions:je({openModal:function(){f.current.open()}}),selectableRows:!0,highlightOnHover:!0,pagination:!0,pointerOnHover:!0,onRowClicked:function(e){p.push("/customers/"+e.id)},selectableRowsHighlight:!0}))},Se=function(){var e=r.a.useRef({data:[],meta:{}}),t=ce(),a=t.makeGetRequest,n=t.data,l=t.loading,c=t.error;if(r.a.useEffect((function(){var e={url:"/users",params:{role:"Customer"},authToken:te()};a(e)}),[]),n){var o=[].concat(Object(s.a)(e.current.data),Object(s.a)(n.data));e.current={data:Object(s.a)(_(o)),meta:n.meta}}return c&&Ct({message:c.message,color:"red",outDuration:500}),r.a.createElement(wt,null,l&&r.a.createElement(Ot,null),r.a.createElement(we,{loadingMore:l,response:e.current,loadMore:function(e){var t={url:"/users",params:{role:"Customer",cursor:e},authToken:te()};a(t)}}))},ke=function(e){var t=e.user,a=e.updateUser,n=e.closeModal;for(var l in delete t.orders,delete t.updatedAt,delete t.createdAt,t)null===t[l]&&(t[l]="");return r.a.createElement(wt,null,r.a.createElement(fe.d,{initialValues:Object(J.a)({},t),validate:function(e){return function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)?e.username?e.phone?e.city?e.state?e.zip?isNaN(e.zip.split("-").join(""))&&(t.zip="Zip code must be a number"):t.zip="Zip is required":t.state="State is required":t.city="City is required":t.phone="Phone is required":t.username="Username is required":t.email="Invalid email address":t.email="Email is required",t}(e)},onSubmit:function(e,t){var n=t.setSubmitting;$(te()).put("/users/".concat(e.id),Object(J.a)({},e)).then((function(t){n(!1),a(e),Ct({message:"Profile Successfully Edited",color:"green"})})).catch((function(e){n(!1),Ct({message:e.message,color:"red"}),console.log("e ",e.response)}))}},(function(e){var t=e.isSubmitting,a=e.submitForm;return r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.c,null,r.a.createElement(Dt,null),r.a.createElement("div",{className:" right-align"},r.a.createElement(B,{onClick:a,disabled:t,type:"submit"},"Submit"),r.a.createElement(B,{type:"button",onClick:n},"Cancel"))),t&&r.a.createElement(Ot,null))})))},xe=function(){var e=ae().id,t=ce(),a=t.makeGetRequest,n=t.setData,l=t.data,c=t.loading,o=t.error,i=r.a.useRef(null);r.a.useEffect((function(){var t={url:"/users/".concat(e,"/orders"),params:{role:"Customer"},authToken:te()};a(t)}),[e]),r.a.useEffect((function(){var e=document.querySelectorAll(".modal"),t=M.Modal.init(e);i.current=t[0]})),o&&Ct({message:o.message,color:"red",outDuration:500});var s=function(){i.current.close()};return r.a.createElement(wt,null,c&&r.a.createElement(Ot,null),r.a.createElement(jt,{title:"Edit Profile Info"},ae()?r.a.createElement(ke,{closeModal:s,updateUser:function(e){n(Object(J.a)({},l,{data:Object(J.a)({},l.data,{},e)})),s()},user:Object(J.a)({},ae())}):null),r.a.createElement(At,{user:l&&l.data,isCustomer:ee(),isAdmin:X(),openModal:function(){i.current.open()}}))},Ae=[{name:"Name",selector:"name",sortable:!0},{name:"Available",selector:"available",sortable:!0},{name:"Category",selector:"category",sortable:!0},{name:"Price",selector:"price",sortable:!0},{name:"Date Added",selector:"createdAt",sortable:!0,right:!0}],Pe={login:{height:"100vh",marginBottom:0},header:{marginTop:0,padding:40},input:{padding:"5px 10px"}},Re={name:"",description:"",price:"",available:"",total:"",category:""},qe=function(e){var t=e.updateProductList,a=e.closeModal,n=r.a.useState(null),l=Object(A.a)(n,2),c=l[0],o=l[1],i=r.a.useState([]),s=Object(A.a)(i,2),m=s[0],u=s[1];r.a.useEffect((function(){$(te()).get("/categories").then((function(e){u(e.data.data)})).catch((function(e){console.log("error ",e.response)}))}),[]);var d=function(e){o(e.target.files[0])},f=m.length>0?m.map((function(e){return r.a.createElement("option",{key:e.id,value:e.name},e.name)})):r.a.createElement("option",{value:""},"No categories added yet!");return r.a.createElement(wt,null,r.a.createElement(fe.d,{initialValues:Object(J.a)({},Re),validate:function(e){var t={};return e.name?e.description?e.price?e.total?e.category?e.available||(t.available="Product availability is required"):t.category="Category of product is required":t.total="Quantity of product is required":t.price="Price of product is required":t.description="Description of product is required":t.name="Name of product is required",t},onSubmit:function(e,n){var r=n.setSubmitting,l=new FormData;l.append("file",c);var o=function(t){if("category"===t){var a=m.filter((function(a){return a.name===e[t]}));l.append(t,a[0].id)}else l.append(t,e[t])};for(var i in e)o(i);$(te()).post("/products",l,{headers:{"content-type":"multipart/form-data"}}).then((function(n){r(!1),Ct({message:"Product successfully Added",color:"green"}),t(Object(J.a)({},n.data,{},e)),a()})).catch((function(e){r(!1),console.log(e.response)}))}},(function(e){var t=e.isSubmitting,n=e.submitForm;return r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.c,null,r.a.createElement(ge,{id:"name",name:"name",label:"Name",autoComplete:"off",type:"text",style:Pe.input}),r.a.createElement(fe.a,{name:"name",component:"div",style:{color:"red"}}),r.a.createElement(ge,{name:"description",label:"Description",autoComplete:"off",type:"text",id:"description",style:Pe.input}),r.a.createElement(fe.a,{name:"description",component:"div",style:{color:"red"}}),r.a.createElement(ge,{id:"total",name:"total",label:"Quantity",autoComplete:"off",style:Pe.input,type:"number"}),r.a.createElement(fe.a,{name:"total",component:"div",style:{color:"red"}}),r.a.createElement(ge,{id:"price",name:"price",label:"Price",autoComplete:"off",style:Pe.input,type:"number"}),r.a.createElement(fe.a,{name:"price",component:"div",style:{color:"red"}}),r.a.createElement(fe.b,{name:"category",as:"select",style:{display:"block",backgroundColor:"inherit"}},r.a.createElement("option",{value:""},"Select Category"),f),r.a.createElement(fe.a,{name:"category",component:"div",style:{color:"red"}}),r.a.createElement(fe.b,{name:"available",as:"select",style:{display:"block",backgroundColor:"inherit",marginTop:15}},r.a.createElement("option",{value:""},"Available?"),r.a.createElement("option",{value:"1"},"True"),r.a.createElement("option",{value:"0"},"False")),r.a.createElement(fe.a,{name:"category",component:"div",style:{color:"red"}}),r.a.createElement("div",{className:"file-field input-field"},r.a.createElement("div",{className:"btn indigo"},r.a.createElement("span",null,"Photo"),r.a.createElement("input",{type:"file",onInput:d})),r.a.createElement("div",{className:"file-path-wrapper"},r.a.createElement("input",{className:"file-path validate",type:"text",onInput:d}))),r.a.createElement("div",{className:" right-align",style:{marginTop:20}},r.a.createElement(B,{onClick:n,disabled:t,type:"submit"},"Submit"),r.a.createElement(B,{disabled:t,type:"button",onClick:function(){return a()}},"Cancel"))),t&&r.a.createElement(Ot,null))})))},Me=function(e){var t=e.closeModal,a=e.updateProductList;return r.a.createElement(jt,{id:"product-modal",title:"Add New Product"},r.a.createElement(qe,{closeModal:t,updateProductList:a}))},De=function(e){var t=e.response,a=e.loadMore,n=e.loadingMore,l=e.updateProductList,c=t.data,o=t.meta,s=r.a.useRef(null),m=Object(i.g)();r.a.useEffect((function(){var e=document.querySelectorAll(".modal"),t=M.Modal.init(e);s.current=t[0]}));var u=function(){s.current.open()},f=function(e){return e.hasNext},p=function(){a(o.nextCursor)},g=c.length>0?function(e){return e.map((function(e){return Object(J.a)({},e,{createdAt:I(e.createdAt),category:e.category.name,available:e.available?"true":"false"})}))}(c):[];return r.a.createElement(d,null,r.a.createElement(Me,{closeModal:function(){s.current.close()},updateProductList:l}),r.a.createElement(Q.a,{title:"Product List",columns:Ae,data:g,actions:r.a.createElement("div",null,f(o)&&r.a.createElement(B,{disabled:n,onClick:p,className:"right"},"Load more"),r.a.createElement(B,{disabled:n,onClick:u,className:"right"},"Add Product")),highlightOnHover:!0,pagination:!0,pointerOnHover:!0,onRowClicked:function(e){m.push("/products/"+e.id)},selectableRowsHighlight:!0}))},Fe=function(){var e=r.a.useRef({data:[],meta:{}}),t=ce(),a=t.makeGetRequest,n=t.setData,l=t.data,c=t.loading,o=t.error;r.a.useEffect((function(){var e={url:"/products",params:{relation:!0},authToken:te()};a(e)}),[]);if(l){var i=[].concat(Object(s.a)(e.current.data),Object(s.a)(l.data));e.current={data:Object(s.a)(function(e){return e.reduce((function(e,t){var a=e;return e.indexOf(t)>-1?e:(a.push(t),a)}),[])}(i)),meta:l.meta}}return o&&Ct({message:o.message,color:"red",outDuration:500}),r.a.createElement(wt,null,c&&r.a.createElement(Ot,null),r.a.createElement(De,{loadingMore:c,updateProductList:function(e){n((function(t){return Object(J.a)({},t,{data:[].concat(Object(s.a)(t.data),[e])})}))},response:e.current,loadMore:function(e){var t={url:"/products",params:{cursor:e,relation:!0},authToken:te()};a(t)}}))},Te=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("ul",Object.assign({className:Object(u.a)(["collection",a])},n),t)},Be=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("li",Object.assign({className:Object(u.a)(["collection-item",a])},n),t)},Le=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("li",Object.assign({className:Object(u.a)(["collection-header",a])},n),t)},ze={login:{height:"100vh",marginBottom:0},header:{marginTop:0,padding:40},input:{padding:"5px 10px"}},Ue={name:"",description:"",price:"",available:"",total:"",category:""},Ie=function(e){var t=e.submitForm,a=e.isSubmitting,n=e.setEdit;return r.a.createElement(B,{className:" right",onClick:function(){n(!0),t()},disabled:a,type:"submit"},"Save Changes")},_e=function(e){var t=e.submitForm,a=e.isSubmitting;return r.a.createElement(B,{className:"right",onClick:t,disabled:a,type:"submit"},"Submit")},Ze=function(e){var t=e.closeModal,a=e.isSubmitting;return r.a.createElement(B,{disabled:a,type:"button",className:"right",onClick:function(){return t()}},"Cancel")},Ge=function(e){var t=e.updateProductList,a=e.closeModal,n=e.product,l=e.updateProduct,c=r.a.useState(null),o=Object(A.a)(c,2),i=o[0],s=o[1],m=r.a.useState([]),u=Object(A.a)(m,2),d=u[0],f=u[1],p=r.a.useState(!1),g=Object(A.a)(p,2),E=g[0],b=g[1],h=n||Ue;r.a.useEffect((function(){$(te()).get("/categories").then((function(e){f(e.data.data)})).catch((function(e){Ct({message:e.message,color:"red"}),console.log("error ",e.response)}))}),[]);var v=function(e){var t=new FormData;t.append("file",i);var a=function(a){if("category"===a){var n=e.category.id||d.filter((function(t){return t.name===e[a]}))[0].id;t.append(a,n)}else t.append(a,e[a])};for(var n in e)a(n);return t},y=function(e){s(e.target.files[0]),console.log(e.target.files[0])},N=d.length>0?d.map((function(e){return r.a.createElement("option",{key:e.id,value:e.name},e.name)})):r.a.createElement("option",{value:""},"No categories added yet!");return r.a.createElement(wt,null,r.a.createElement(fe.d,{initialValues:Object(J.a)({},h),validate:function(e){var t={};return e.name?e.description?e.price?e.total?e.category?e.available||(t.available="Product availability is required"):t.category="Category of product is required":t.total="Quantity of product is required":t.price="Price of product is required":t.description="Description of product is required":t.name="Name of product is required",t},onSubmit:function(e,r){var c=r.setSubmitting;E?function(e,t){var a,r,c=t.setSubmitting,o={};i?(a="/products/".concat(n.id,"/image"),o.headers={"content-type":"multipart/form-data"},r=v(e)):(a="/products/".concat(e.id),delete e.createdAt,delete e.updatedAt,r=Object(J.a)({},e,{available:!!+e.available,category:e.category.id||d.filter((function(t){return t.name===e.category}))[0].id})),$(te()).put(a,r,o).then((function(t){console.log("res",t),c(!1),Ct({message:"Product successfully Edited",color:"green"}),l(i?Object(J.a)({},e,{imageUrl:t.data.imageUrl}):e)})).catch((function(e){c(!1),Ct({message:e.message,color:"red"}),console.log(e.response)}))}(e,{setSubmitting:c}):function(e,n){var r=n.setSubmitting,l=v(e);$(te()).post("/products",l,{headers:{"content-type":"multipart/form-data"}}).then((function(n){r(!1),Ct({message:"Product successfully Added",color:"green"}),t(Object(J.a)({},n.data,{},e)),a()})).catch((function(e){r(!1),Ct({message:e.message,color:"red"}),console.log(e.response)}))}(e,{setSubmitting:c})}},(function(e){var t=e.isSubmitting,l=e.submitForm;return r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.c,null,r.a.createElement(ge,{id:"name",name:"name",label:"Name",autoComplete:"off",type:"text",style:ze.input}),r.a.createElement(fe.a,{name:"name",component:"div",style:{color:"red"}}),r.a.createElement(ge,{name:"description",label:"Description",autoComplete:"off",type:"text",id:"description",style:ze.input}),r.a.createElement(fe.a,{name:"description",component:"div",style:{color:"red"}}),r.a.createElement(ge,{id:"total",name:"total",label:"Qauntity",autoComplete:"off",style:ze.input,type:"number"}),r.a.createElement(fe.a,{name:"total",component:"div",style:{color:"red"}}),r.a.createElement(ge,{id:"price",name:"price",label:"Price",autoComplete:"off",style:ze.input,type:"number"}),r.a.createElement(fe.a,{name:"price",component:"div",style:{color:"red"}}),r.a.createElement("label",{htmlFor:"category"},"Category"),r.a.createElement(fe.b,{name:"category",as:"select",style:{display:"block",backgroundColor:"inherit"}},n?r.a.createElement("option",{value:n.category.name},n.category.name):r.a.createElement("option",{value:""},"Select Category"),N),r.a.createElement(fe.a,{name:"category",component:"div",style:{color:"red"}}),r.a.createElement("label",{htmlFor:"available"},"Still in Stock?"),r.a.createElement(fe.b,{name:"available",as:"select",style:{display:"block",backgroundColor:"inherit",marginTop:15}},n?r.a.createElement("option",{value:n.available?"1":"0"},n.available?"True":"False"):r.a.createElement("option",{value:""},"Available?"),n&&n.available?r.a.createElement("option",{value:"0"},"False"):r.a.createElement("option",{value:"1"},"True")),r.a.createElement(fe.a,{name:"category",component:"div",style:{color:"red"}}),r.a.createElement("div",{className:"file-field input-field"},r.a.createElement("div",{className:"btn indigo"},n?r.a.createElement("span",null,"Change Photo"):r.a.createElement("span",null,"Photo"),r.a.createElement("input",{type:"file",onInput:y})),r.a.createElement("div",{className:"file-path-wrapper"},r.a.createElement("input",{className:"file-path validate",type:"text",onInput:y}))),r.a.createElement("div",{style:{marginTop:20}},n?r.a.createElement(Ie,{setEdit:b,submitForm:l,isSubmitting:t}):r.a.createElement(_e,{isSubmitting:t,submitForm:l}),!n&&r.a.createElement(Ze,{isSubmitting:t,closeModal:a}))),t&&r.a.createElement(Ot,null))})))},Je={fabContainer:{marginTop:-25,display:"flex",justifyContent:"flex-end"}},Ye=function(e){var t=e.product,a=e.updateProduct,n=Object(i.g)(),l=r.a.useState(!1),c=Object(A.a)(l,2),o=c[0],s=c[1];return r.a.createElement(h,null,r.a.createElement(N,{sm:12,md:10,mdOffset:1},o&&r.a.createElement(Ot,null),r.a.createElement(d,null,r.a.createElement(E,{src:t.imageUrl},r.a.createElement("div",{style:Je.fabContainer},r.a.createElement(F,{className:"btn activator  indigo",style:{marginRight:5}},r.a.createElement(C,{children:"edit"})),r.a.createElement(F,{onClick:function(){s(!0),$(te()).delete("/products/"+t.id).then((function(e){s(!1),Ct({message:"Product with name ".concat(t.name," successfully deleted"),color:"green"}),n.replace("/products")})).catch((function(e){s(!1),Ct({message:e.message,color:"red"})}))},className:"btn  red",style:{marginRight:5}},r.a.createElement(C,{children:"delete"})))),r.a.createElement(p,null,r.a.createElement(Te,{className:"with-header"},r.a.createElement(Le,{className:"center-align indigo-text"},r.a.createElement("h4",null,t.name)),function(e){var t={Description:e.description,Price:"$"+e.price,Quantity:e.total,"Still In Stock?":+e.available?"Yes":"No",Category:e.category.name||e.category,"Date Added":I(e.createdAt)};return Object.keys(t).map((function(e,a){return r.a.createElement(Be,{key:a},r.a.createElement("h6",null,e,": ",r.a.createElement("span",null,t[e])))}))}(t))),r.a.createElement(b,null,r.a.createElement(f,{className:"indigo-text center-align"},t.name,r.a.createElement(C,{children:"close",className:"right"})),r.a.createElement(Ge,{product:t,updateProduct:a})))))},Qe=function(){var e=Object(i.i)().id,t=ce(),a=t.makeGetRequest,n=t.setData,l=t.data,c=t.loading,o=t.error,s=r.a.useRef(null);r.a.useEffect((function(){var t={url:"/products/".concat(e),authToken:te()};a(t)}),[e]),r.a.useEffect((function(){var e=document.querySelectorAll(".modal"),t=M.Modal.init(e);s.current=t[0]}));return o&&Ct({message:o.message,color:"red",outDuration:500}),r.a.createElement(wt,null,c&&r.a.createElement(Ot,null),l&&r.a.createElement(Ye,{product:l,updateProduct:function(e){n(e)}}))},He=function(e){var t=e.category,a=t.products.length>0?t.products.map((function(e){return function(e){return r.a.createElement(Be,{className:"avatar",key:e.id},r.a.createElement("p",null,r.a.createElement("span",{className:"title"},"Name: "),e.name,r.a.createElement("br",null),r.a.createElement("span",{className:"title"},"Price: "),e.price,r.a.createElement("br",null),r.a.createElement("span",{className:"title"},"Still in Stock?: "),+e.available?"Yes":"No",r.a.createElement("br",null),r.a.createElement("span",{className:"title"},"Quantity: "),e.total,r.a.createElement("br",null)),r.a.createElement(B,{className:"secondary-content red-text delete-btn"},r.a.createElement(C,{children:"close"})))}(e)})):r.a.createElement(Be,null,"No product under ",t.name," category");return r.a.createElement(Te,{className:"with-header ",style:{marginTop:60}},r.a.createElement(Le,{className:"indigo-text center-align"},r.a.createElement("h6",null,"Products on ",t.name," Category")),a)},We=function(e){var t=e.category,a=e.handleSaveChanges,n=e.handleDelete,l=e.loading,c=e.handleSave,o=r.a.useState(t),i=Object(A.a)(o,2),s=i[0],m=i[1];r.a.useEffect((function(){m(t)}),[t]);return r.a.createElement(h,{style:{marginTop:20}},r.a.createElement(N,{sm:12,md:8,mdOffset:2,className:"input-field"},r.a.createElement("label",{className:"active",htmlFor:"category"},"Name of category"),r.a.createElement("input",{placeholder:"Enter name of category",id:"category",type:"text",autoComplete:"off",value:s?s.name:"",onChange:function(e){var t=e.target;m((function(e){return Object(J.a)({},e,{name:t.value})}))}})),r.a.createElement(N,{sm:12,className:"right-align",style:{marginTop:30}},!t&&r.a.createElement(B,{disabled:l,onClick:function(){c(s)}},"Save"),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{disabled:l,onClick:function(){a(s)}},"Save Changes"),r.a.createElement(B,{onClick:function(){return n(t.id)},disabled:l,className:"delete-category"},"Delete"))),t&&r.a.createElement(N,{sm:12},r.a.createElement(He,{category:t})))},$e=function(){var e=ce(),t=e.makeGetRequest,a=e.setData,n=e.setLoading,l=e.setError,c=e.data,o=e.loading,i=e.error,m=r.a.useState(null),u=Object(A.a)(m,2),g=u[0],E=u[1];r.a.useEffect((function(){var e={url:"/categories",params:{relation:!0},authToken:te()};t(e)}),[]);i&&Ct({message:i.message,color:"red"});var v=c&&c.data.length>0?c.data.map((function(e){return r.a.createElement(Be,{onClick:function(){return E(e)},key:e.id,className:"category-item activator"},e.name)})):"No product category added yet";return r.a.createElement(r.a.Fragment,null,o&&r.a.createElement(Ot,null),r.a.createElement(wt,null,r.a.createElement(h,null,r.a.createElement(N,{sm:12,md:10,mdOffset:1},r.a.createElement(d,null,r.a.createElement(p,{className:"categories"},r.a.createElement(F,{className:"btn-large activator halfway-fab  indigo"},r.a.createElement(C,{children:"add"})),r.a.createElement(Te,{className:"with-header"},r.a.createElement(Le,null,r.a.createElement("h5",{className:"indigo-text center-align"},"Product Categories")),v)),r.a.createElement(b,null,r.a.createElement(f,{className:"indigo-text center-align",onClick:function(){return E(null)}},g?"Edit Category":"Add New Category",r.a.createElement(C,{children:"close",className:"right"})),r.a.createElement(We,{category:g,handleSaveChanges:function(e){n(!0),$(te()).put("/categories/"+e.id,{name:e.name,total:e.total}).then((function(t){n(!1),Ct({message:"Successfully Edited",color:"green"}),a((function(t){var a=t.data.map((function(t){return t.id===e.id?e:t}));return Object(J.a)({},t,{data:Object(s.a)(a)})}))})).catch((function(e){n(!1),l(e),console.log("error ",e.response)}))},loading:o,handleDelete:function(e){n(!0),$(te()).delete("/categories/"+e).then((function(t){n(!1),Ct({message:"Successfully Edited",color:"green"}),a((function(t){return Object(J.a)({},t,{data:Object(s.a)(t.data.filter((function(t){return t.id===e})))})}))})).catch((function(e){n(!1),l(e),console.log("error ",e.response)}))},handleSave:function(e){n(!0),$(te()).post("/categories",e).then((function(e){n(!1),Ct({message:"Successfully Saved",color:"green"}),a((function(t){return Object(J.a)({},t,{data:[].concat(Object(s.a)(t.data),[Object(J.a)({},e.data,{products:[]})])})}))})).catch((function(e){n(!1),l(e),console.log("error ",e.response)}))}})))))))},Ve={input:{padding:"5px 10px"}},Ke=function(e){var t=e.user,a=e.updateUser;delete t.updatedAt,delete t.createdAt;return r.a.createElement(d,{style:{padding:40,paddingTop:0}},r.a.createElement(p,null,r.a.createElement(f,{className:"center-align",style:{paddingBottom:20},children:"Edit Profile Details"}),r.a.createElement(fe.d,{initialValues:Object(J.a)({},t),validate:function(e){var a={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)?e.username?"Employee"===t.role&&(e.address?e.city?e.state?e.zip?isNaN(e.zip.split("-").join(""))&&(a.zip="Zip code must be a number"):a.zip="Zip Required":a.state="State Required":a.city="City Required":a.address="Address Required"):a.username="Username Required":a.email="Invalid email address":a.email="Email Required",a},onSubmit:function(e,t){var n=t.setSubmitting;$(te()).put("/users/".concat(e.id),Object(J.a)({},e)).then((function(t){n(!1),a(e),Ct({message:"Profile Successfully Edited",color:"green"})})).catch((function(e){n(!1),Ct({message:e.message,color:"red"}),console.log("e ",e.response)}))}},(function(e){var t=e.isSubmitting,a=e.submitForm;return r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.c,null,r.a.createElement(ge,{id:"email",name:"email",label:"Email Address",autoComplete:"off",style:Ve.input,labelClassName:"active"}),r.a.createElement(fe.a,{name:"email",component:"div",style:{color:"red"}}),r.a.createElement(ge,{name:"username",label:"Username",autoComplete:"off",id:"username",style:Ve.input,labelClassName:"active"}),r.a.createElement(fe.a,{name:"username",component:"div",style:{color:"red"}}),r.a.createElement(ge,{id:"address",name:"address",label:"Address",autoComplete:"off",style:Ve.input,labelClassName:"active",type:"text"}),r.a.createElement(fe.a,{name:"address",component:"div",style:{color:"red"}}),r.a.createElement(ge,{id:"city",name:"city",label:"City",autoComplete:"off",style:Ve.input,labelClassName:"active",type:"text"}),r.a.createElement(fe.a,{name:"city",component:"div",style:{color:"red"}}),r.a.createElement(ge,{id:"state",name:"state",label:"State",autoComplete:"off",style:Ve.input,labelClassName:"active",type:"text"}),r.a.createElement(fe.a,{name:"state",component:"div",style:{color:"red"}}),r.a.createElement(ge,{id:"zip",name:"zip",label:"Zip",autoComplete:"off",style:Ve.input,labelClassName:"active",type:"text"}),r.a.createElement(fe.a,{name:"zip",component:"div",style:{color:"red"}}),r.a.createElement(B,{className:"right ",onClick:a,disabled:t,type:"submit"},"Save")),t&&r.a.createElement(Ot,null))}))))},Xe={login:{height:"100vh",marginBottom:0},header:{marginTop:0,padding:40},input:{padding:"5px 10px"}},et=function(e){e.handleAdd;var t=r.a.useState(""),a=Object(A.a)(t,2),n=a[0],l=a[1];return r.a.createElement(d,{style:{paddingBottom:40}},r.a.createElement(p,null,r.a.createElement(f,{style:{paddingBottom:20},children:"Reset Password"}),r.a.createElement(fe.d,{initialValues:{password:"",confirm:""},validate:function(e){l(e.password);var t={};return e.password?e.password.length<6?t.password="Password length must be greater than 5":e.confirm!==n&&(t.confirm="Confirm password must match password field"):t.password="Password Required",t},onSubmit:function(e,t){var a=t.setSubmitting;setTimeout((function(){a(!1)}),4e3)}},(function(e){var t=e.isSubmitting,a=e.submitForm;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(Ot,null),r.a.createElement(fe.c,null,r.a.createElement(ge,{name:"password",id:"password",label:"Password",autoComplete:"off",style:Xe.input,type:"password"}),r.a.createElement(fe.a,{name:"password",component:"div",style:{color:"red"}}),r.a.createElement(ge,{name:"confirm",label:"Confirm Password",autoComplete:"off",style:Xe.input,type:"password",id:"confirm"}),r.a.createElement(fe.a,{name:"confirm",component:"div",style:{color:"red"}}),r.a.createElement(B,{className:"right",onClick:a,disabled:t,type:"submit"},"Save")))}))))},tt=function(){var e=ae();for(var t in e)null===e[t]&&(e[t]="");return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"center-align indigo-text",style:{marginBottom:30}},"Account Settings"),r.a.createElement(wt,null,r.a.createElement(h,null,r.a.createElement(N,{sm:12,md:8,mdOffset:2},r.a.createElement(Ke,{user:e})),r.a.createElement(N,{sm:12,md:8,mdOffset:2},r.a.createElement(et,null)))))},at=function(){var e=Object(i.i)().id,t=ce(),a=t.makeGetRequest,n=t.data,l=t.loading,c=t.error;return r.a.useEffect((function(){var t={url:"/users/".concat(e,"/orders"),params:{role:"Customer"},authToken:te()};a(t)}),[e]),c&&Ct({message:c.message,color:"red",outDuration:500}),r.a.createElement(wt,null,l&&r.a.createElement(Ot,null),r.a.createElement(At,{user:n&&n.data,isAdmin:X(),isCustomer:ee()}))},nt=a(12),rt=a.n(nt),lt=a(21),ct=a(50),ot=a(107),it={owner:"iammrsea",repo:"ecommerce",path:"rebuild/data.json"},st=function(){return e=ae().rebuild_token,new ot.a({auth:e});var e},mt=function(e){return st().repos.createOrUpdateFile(e)},ut=function(){var e=Object(n.useState)(!1),t=Object(A.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(null),c=Object(A.a)(l,2),o=c[0],i=c[1];return{rebuild:function(){var e=Object(lt.a)(rt.a.mark((function e(){var t,a,n,l,c,o;return rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,s=it,st().repos.getContents(s);case 4:if(t=e.sent,a=t.data,n=a.sha,l=a.content,c=JSON.parse(ct.Base64.decode(l)),!(!Object.keys(c).length>0)){e.next=15;break}return o=Object(v.a)({},ae().username,{request:"rebuild site",date:(new Date).toISOString()}),e.next=13,mt(Object(J.a)({},it,{message:"A request to rebuild site",content:ct.Base64.encode(JSON.stringify(o)),sha:n}));case 13:e.next=18;break;case 15:return c[ae().username]={request:"rebuild site",date:(new Date).toISOString()},e.next=18,mt(Object(J.a)({},it,{message:"A request to rebuild site",content:ct.Base64.encode(JSON.stringify(c)),sha:n}));case 18:r(!1),Ct({message:"Request successfully sent",color:"green"}),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),r(!1),i(e.t0);case 26:case"end":return e.stop()}var s}),e,null,[[0,22]])})));return function(){return e.apply(this,arguments)}}(),loading:a,error:o}},dt=function(){var e=ut(),t=e.rebuild,a=e.loading,n=e.error,l=function(){var e=Object(lt.a)(rt.a.mark((function e(){return rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ae().rebuild_token){e.next=2;break}return e.abrupt("return",Ct({message:"You don't have the admin permission to perform this action",color:"orange"}));case 2:t();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(wt,null,r.a.createElement(h,null,r.a.createElement(N,{sm:12,md:8,mdOffset:2},a&&r.a.createElement(Ot,null),n&&Ct({message:n.message,color:"red"}),r.a.createElement(d,null,r.a.createElement(p,null,r.a.createElement(f,{className:"indigo-text"},"Re-generate the store"),r.a.createElement("p",null,"You are only expected to re-generate the store, the customer-facing end, whenever you make changes to your products and categories and you wish the customers to see those changes when they visit your website. Other than this scenario, you should have no reasons to perform this action. Click the button bellow to re-generate.")),r.a.createElement(g,{className:"right-align"},r.a.createElement(B,{onClick:l},"Generate"))))))},ft=(a(242),function(){var e=Object(i.g)();return r.a.createElement("div",{className:"navbar-fixed"},r.a.createElement("nav",{className:"navbar indigo"},r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("span",{onClick:function(){window.location="/"},className:"brand-logo link waves-effect white-text"},"WDYF"),r.a.createElement("ul",{id:"nav-mobile",className:"right"},r.a.createElement("li",null,r.a.createElement("span",{onClick:function(){ne(),e.replace("/login")},className:" waves-effect white-text"},"SignOut")),r.a.createElement("li",{className:"hide-on-med-and-down"},r.a.createElement(o.b,{to:"/settings","data-target":"chat-dropdown",className:"white-text dropdown-trigger waves-effect"},r.a.createElement(C,{children:"settings"})))),r.a.createElement(o.b,{to:"#!","data-target":"sidenav-left",className:"sidenav-trigger left"},r.a.createElement(C,{children:"menu",className:"white-text"})))))}),pt={brand:{paddingTop:10,paddingBottom:10,paddingLeft:35,border:" solid 2px #f5f5f5"}},gt=function(){return r.a.createElement("div",{className:"logo",style:pt.brand},r.a.createElement("span",{className:"logo-container",onClick:function(){window.location="/"},style:{borderBottom:0,cursor:"pointer"}},"Admin",r.a.createElement(C,{children:"view_comfy",className:"left"})))},Et=function(e){var t=e.pages,a=e.closeSidenav,n=function(e){var t=e.split("/");return window.location.href.endsWith(t[t.length-1])},l=t.length>0&&t.map((function(e,t){return r.a.createElement(Be,{key:e.name+t,onClick:a},r.a.createElement(o.b,{to:e.url,activeClassName:Object(u.a)({active:n(e.url)}),className:"waves-effect waves-blue "},e.name,e.icon))}));return r.a.createElement("div",{id:"sidenav-left",className:"sidenav sidenav-fixed white",style:{borderRight:"solid 3px #f5f5f5"}},r.a.createElement(gt,null),r.a.createElement(Te,{style:{marginTop:0}},l))},bt=function(){return r.a.createElement("footer",{className:"page-footer indigo darken-4 white-text"},r.a.createElement(wt,null,r.a.createElement(h,null,r.a.createElement(N,{sm:4,smOffset:2,md:3,mdOffset:3},r.a.createElement("h5",null,"About"),r.a.createElement("ul",{className:"white-text"},r.a.createElement("li",null,r.a.createElement("a",{className:"white-text",href:"#!"},"Blog")))),r.a.createElement(N,{sm:4,smOffset:2,md:3,mdOffset:3},r.a.createElement("h5",null,"Contact"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{className:"white-text",href:"#!"},"Twitter")),r.a.createElement("li",null,r.a.createElement("a",{className:"white-text",href:"#!"},"Facebook")),r.a.createElement("li",null,r.a.createElement("a",{className:"white-text",href:"#!"},"Github"))))),r.a.createElement(h,null,r.a.createElement(N,{sm:12},r.a.createElement("div",{className:"footer-copyright center-align"},r.a.createElement(wt,null,"\xa9 ",(new Date).getFullYear()," wedoyourfarm.com"))))))},ht=[{url:"/dashboard",name:"Dashboard",icon:r.a.createElement("i",{className:"material-icons"},"dashboard"),component:r.a.createElement(oe,null)},{url:"/profile",name:"User Profile",icon:r.a.createElement("i",{className:"material-icons"},"person"),component:r.a.createElement(xe,null)},{url:"/employees",name:"Employees",icon:r.a.createElement("i",{className:"material-icons"},"people"),component:r.a.createElement(he,null)},{url:"/customers",name:"Customers",icon:r.a.createElement("i",{className:"material-icons"},"people"),component:r.a.createElement(Se,null)},{url:"/products",name:"Products",icon:r.a.createElement("i",{className:"material-icons"},"shopping_basket"),component:r.a.createElement(Fe,null)},{url:"/categories",name:"Categories",icon:r.a.createElement("i",{className:"material-icons"},"category"),component:r.a.createElement($e,null)},{url:"/settings",name:"Settings",icon:r.a.createElement("i",{className:"material-icons"},"settings"),component:r.a.createElement(tt,null)},{url:"/rebuild",name:"Re-Build",icon:r.a.createElement("i",{className:"material-icons"},"build"),component:r.a.createElement(dt,null)}],vt=function(){return X()?ht:K()&&"Employee"===V().user.role||ee()?ht.filter((function(e){return"Employees"!==e.name})):void 0},yt=function(e){var t=e.children,a=r.a.useRef(null);r.a.useEffect((function(){var e=document.querySelectorAll(".sidenav");a.current=M.Sidenav.init(e)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(ft,null),r.a.createElement(Et,{pages:vt(),closeSidenav:function(){a.current[0].close()}}),r.a.createElement("main",null,t),r.a.createElement(bt,null))},Nt=function(e){var t=e.routes,a=Object(i.h)(),n=t.map((function(e,t){return r.a.createElement(i.b,{key:e.name+t,path:e.url,exact:!0,render:function(){return K()&&!ee()?r.a.createElement(yt,null,e.component):r.a.createElement(i.a,{to:"/login"})}})}));return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/login",render:function(){return K()&&!ee()?r.a.createElement(i.a,{to:"/dashboard"}):r.a.createElement(ie,null)}}),r.a.createElement(i.b,{exact:!0,path:"/",render:function(){return r.a.createElement(i.a,{to:"/login"})}}),r.a.createElement(i.b,{exact:!0,path:"/customers/:id",render:function(){return K()&&!ee()?r.a.createElement(yt,null,r.a.createElement(at,null)):r.a.createElement(i.a,{to:"/login"})}}),r.a.createElement(i.b,{exact:!0,path:"/products/:id",render:function(){return K()&&!ee()?r.a.createElement(yt,null,r.a.createElement(Qe,null)):r.a.createElement(i.a,{to:"/login"})}}),n,!function(e){return"/"===e.pathname}(a)&&r.a.createElement(i.a,{to:"/login"}))},Ot=function(e){return r.a.createElement("div",Object.assign({className:"progress indigo"},e),r.a.createElement("div",{className:"indeterminate indigo lighten-4"}))},Ct=function(e){var t=e.message,a=e.color,n=e.outDuration;M.toast({html:t,classes:a,outDuration:n||375})},jt=function(e){var t=e.children,a=e.id,n=e.title;return r.a.createElement(d,null,r.a.createElement("div",{id:a,className:"modal"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("h5",{className:"center-align indigo-text"},n),t)))},wt=function(e){var t=e.children;Object(m.a)(e,["children"]);return r.a.createElement("div",{className:"container"},t)},St=[{name:"S/N",selector:"id",sortable:!0},{name:"Quantity",selector:"qty",sortable:!0},{name:"Status",selector:"status",sortable:!0},{name:"Amount($)",selector:"amount",sortable:!0},{name:"Date",selector:"createdAt",sortable:!0}],kt=function(e){var t,a=e.orders,n=e.title,l=r.a.useState(null),c=Object(A.a)(l,2),o=c[0],i=c[1],s=r.a.useRef(null),m=a.length>0?function(e){return e.map((function(e,t){return Object(J.a)({},e,{createdAt:I(e.createdAt),id:t+1})}))}(a):a;return r.a.createElement(d,null,r.a.createElement(p,null,r.a.createElement("button",{ref:s,className:"activator",style:{display:"none"}}),r.a.createElement(Q.a,{title:n,columns:St,data:m,highlightOnHover:!0,pointerOnHover:!0,onRowClicked:function(e){i(e),s.current.click()}})),r.a.createElement(b,null,r.a.createElement(f,{className:"indigo-text center-align"},"Order Details",r.a.createElement(C,{children:"close",className:"right"})),o&&r.a.createElement(Te,null,r.a.createElement(Be,null,r.a.createElement(h,null,r.a.createElement(N,{sm:12,md:4},r.a.createElement("div",null,"Product(s) Ordered:")),r.a.createElement(N,{sm:12,md:8},(t=o.items,JSON.parse(t).map((function(e){return r.a.createElement("div",{key:e.id+e.name},"Name: ",e.name,", Qty: ",e.qty)})))))),r.a.createElement(Be,null,"Total Quantity: ",o.qty),r.a.createElement(Be,null,"Total Amount: ",o.amount),r.a.createElement(Be,null,"Status: ",o.status),r.a.createElement(Be,null,"Date Ordered: ",o.createdAt),r.a.createElement(Be,null,"Currency: ",o.currency))))},xt={userField:{fontWeight:600}},At=function(e){var t=e.user,a=e.isCustomer,n=e.openModal,l=Object(i.g)();return r.a.createElement(d,null,t&&r.a.createElement(p,null,r.a.createElement(Te,{className:"with-header"},r.a.createElement(Le,{className:"indigo-text"},r.a.createElement("span",{className:"user-profile-detail-title"},a||"Customer"!==t.role?"User Profile Details":"Customer Profile")),function(e){var t={Username:e.username,Email:e.email,Phone:e.phone,City:e.city,State:e.state,Zip:e.zip};return Object.keys(t).map((function(e,a){return r.a.createElement(Be,{key:a},r.a.createElement("span",{style:xt.userField},e,": "),t[e])}))}(t),"Customer"===t.role&&r.a.createElement(Be,null,r.a.createElement("span",{style:xt.userField},"Date Joined:")," ",I(t.createdAt)),a&&r.a.createElement(Be,{className:"right"},r.a.createElement(B,{onClick:function(){ne(),l.replace("/login")}},"SignOut"))),a&&r.a.createElement(F,{style:{marginTop:20},onClick:function(){return n()},className:"halfway-fab  right indigo"},r.a.createElement(C,{children:"edit"})),!a&&"Customer"!==t.role&&r.a.createElement(F,{style:{marginTop:20},onClick:function(){return l.push("/settings")},className:"right halfway-fab  indigo"},r.a.createElement(C,{children:"edit"}))),r.a.createElement("div",{id:"order-table"},t&&"Customer"===t.role&&r.a.createElement(kt,{title:a?r.a.createElement("span",null,"Your Orders"):r.a.createElement("span",null,"Customer Orders"),orders:t&&t.orders?t.orders:[]})))},Pt={login:{height:"100vh",marginBottom:0},header:{marginTop:0,padding:40},input:{padding:"15px",borderRadius:"5px",boxSizing:"border-box",color:"#fff",fontSize:"18px"}},Rt=function(e){var t=e.handleSubmit,a=e.adminRoute,n=Object(i.g)(),l=function(){n.push("/register")};return r.a.createElement(h,{className:"grey lighten-5 login",style:Pt.login},r.a.createElement("h2",{className:"header center-align white-text",style:Pt.header},"Sign In"),r.a.createElement(h,null,r.a.createElement(N,{sm:12,md:8,mdOffset:2},r.a.createElement(wt,null,r.a.createElement(fe.d,{initialValues:{username:"",password:""},validate:function(e){var t={};return e.username?e.password||(t.password="Password is required"):t.username="Username is required",t},onSubmit:t},(function(e){var t=e.isSubmitting,n=e.submitForm;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(Ot,null),r.a.createElement(fe.c,null,r.a.createElement(ge,{type:"text",name:"username",label:"Username",id:"username",autoFocus:!0,styleLabel:"login-label",style:Object(J.a)({},Pt.input,{marginBottom:20})}),r.a.createElement(fe.a,{name:"username",component:"div",style:{color:"orange",marginBottom:30}}),r.a.createElement(ge,{label:"Password",type:"password",name:"password",id:"password",styleLabel:"login-label",autoComplete:"off",style:Object(J.a)({},Pt.input)}),r.a.createElement(fe.a,{name:"password",component:"div",style:{color:"orange",marginBottom:30}}),r.a.createElement("div",{className:" right-align"},!a&&r.a.createElement(L,{className:"login-btn",onClick:l,type:"submit"},"Sign Up"),r.a.createElement(L,{className:"login-btn",onClick:n,disabled:t,type:"submit"},"Sign In"))))}))))))},qt=Rt;Rt.defaultProps={adminRoute:!1};var Mt={input:{padding:"5px 10px"}},Dt=function(e){var t=e.inputStyle;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge,{id:"email",name:"email",autoComplete:"off",type:"email",label:"Email Address",autoFocus:!0,style:t||Mt.input,labelClassName:t&&"noactive"}),r.a.createElement(fe.a,{name:"email",component:"div",style:{color:t?"orange":"red",marginBottom:t&&"30px"}}),r.a.createElement(ge,{name:"username",label:"Username",autoComplete:"off",type:"text",id:"username",style:t||Mt.input,labelClassName:t&&"noactive"}),r.a.createElement(fe.a,{name:"username",component:"div",style:{color:t?"orange":"red",marginBottom:t&&"30px"}}),r.a.createElement(ge,{id:"phone",name:"phone",label:"Phone",autoComplete:"off",style:t||Mt.input,labelClassName:t&&"noactive",type:"text"}),r.a.createElement(fe.a,{name:"phone",component:"div",style:{color:t?"orange":"red",marginBottom:t&&"30px"}}),r.a.createElement(ge,{id:"city",name:"city",label:"City",autoComplete:"off",style:t||Mt.input,labelClassName:t&&"noactive",type:"text"}),r.a.createElement(fe.a,{name:"city",component:"div",style:{color:t?"orange":"red",marginBottom:t&&"30px"}}),r.a.createElement(ge,{id:"state",name:"state",label:"State",autoComplete:"off",style:t||Mt.input,labelClassName:t&&"noactive",type:"text"}),r.a.createElement(fe.a,{name:"state",component:"div",style:{color:t?"orange":"red",marginBottom:t&&"30px"}}),r.a.createElement(ge,{id:"zip",name:"zip",label:"Zip",autoComplete:"off",style:t||Mt.input,labelClassName:t&&"noactive",type:"text"}),r.a.createElement(fe.a,{name:"zip",component:"div",style:{color:t?"orange":"red",marginBottom:t&&"30px"}}))};var Ft=function(){return r.a.createElement(o.a,null,r.a.createElement(Nt,{routes:ht}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Ft,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[109,1,2]]]);
//# sourceMappingURL=main.6b5759c9.chunk.js.map