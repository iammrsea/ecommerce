(this.webpackJsonpbackend=this.webpackJsonpbackend||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(82),c=a.n(l),o=(a(100),a(6)),s=(a(101),a(102),a(24)),i=(a(58),a(4)),m=a(5),u=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("i",Object.assign({className:Object(i.a)(["material-icons",a])},n),t)},d=a(9),f=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(i.a)(["card",a])},n),t)},p=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(i.a)(["card-title",a])},n),t)},g=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(i.a)(["card-content",a])},n),t)},E=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(i.a)(["card-action",a])},n),t)},b=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(i.a)(["card-reveal",a])},n),t)},h=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(i.a)(["row",a])},n),t)},v=a(20),y=function(e){var t=e.sm,a=e.md,n=e.lg,r=e.smOffset,l=e.mdOffset,c=e.lgOffset,o=e.className,s="s".concat(t),m="m".concat(a),u="l".concat(n),d="offset-s".concat(r),f="offset-m".concat(l),p="offset-l".concat(c);return Object(i.a)(["col",Object(v.a)({},s,t),Object(v.a)({},m,a),Object(v.a)({},u,n),Object(v.a)({},d,r),Object(v.a)({},f,l),Object(v.a)({},p,c),o])},N=function(e){var t=e.children,a=Object(m.a)(e,["children"]);return r.a.createElement("div",{className:y(a)},t)},O=function(e){var t=e.title,a=e.count,n=e.children,l=e.className;return r.a.createElement(f,{className:l},r.a.createElement(g,null,r.a.createElement(h,null,r.a.createElement(N,{sm:7},r.a.createElement("span",{style:{display:"block",fontWeight:600}},t),r.a.createElement("span",{style:{fontWeight:500}},a)),r.a.createElement(N,{sm:5},n)),r.a.createElement(h,null,r.a.createElement(N,{sm:12},r.a.createElement("div",{className:"card-metric-change increase green-text"},r.a.createElement("i",{className:"material-icons left"},"keyboard_arrow_down"),"50%")))))},C={icon:{width:"50px",height:"50px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:"#fff"}},j=function(e){var t=e.children,a=e.className;return r.a.createElement(u,{className:Object(i.a)(["circle",a]),style:C.icon},t)},w=function(e){var t=e.customerCount;return r.a.createElement(O,{title:"Total Customers",count:t},r.a.createElement(j,{className:"green"},"people"))},S=function(e){var t=e.productCount;return r.a.createElement(O,{title:"Total Products",count:t},r.a.createElement(j,{className:"red"},"shopping_basket"))},k=function(e){var t=e.orderCount;return r.a.createElement(O,{title:"Total Order",count:t},r.a.createElement(j,{className:"indigo"},"insert_chart"))},x=a(2),A=a(83),R="#eeeeee",P={primary:"#1e88e5",secondary:"#2979ff"},q={responsive:!0,animation:!1,cornerRadius:20,tooltips:{enabled:!0,mode:"index",intersect:!1,borderWidth:1,borderColor:R,backgroundColor:"#ffffff",titleFontColor:P.primary,bodyFontColor:P.secondary,footerFontColor:P.secondary},layout:{padding:0},scales:{xAxes:[{barThickness:12,maxBarThickness:10,barPercentage:.5,categoryPercentage:.5,ticks:{fontColor:P.secondary},gridLines:{display:!1,drawBorder:!1}}],yAxes:[{ticks:{fontColor:P.secondary,beginAtZero:!0,min:0},gridLines:{borderDash:[2],borderDashOffset:[2],color:R,drawBorder:!1,zeroLineBorderDash:[2],zeroLineBorderDashOffset:[2],zeroLineColor:R}}]}},T=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("button",Object.assign({className:Object(i.a)(["btn-floating waves-effect waves-light",a])},n),t)},F=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("button",Object.assign({style:{textTransform:"capitalize"},className:Object(i.a)(["btn waves-effect waves-light",a])},n),t)},D=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("button",Object.assign({style:{textTransform:"capitalize"},className:Object(i.a)(["btn waves-effect waves-light btn-flat product-btn",a])},n),t)},_=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("button",Object.assign({style:{textTransform:"capitalize"},className:Object(i.a)(["btn waves-effect waves-light btn-flat ",{"product-btn":!a},a])},n),t)},z=a(52),L=a.n(z),B=function(e,t){return L()(e).format(t||"DD-MM-YYYY")},I=function(e){return e.reduce((function(e,t){var a=e;return e.indexOf(t)>-1?e:(a.push(t),a)}),[])},U=function(e){var t=e.split("/");return window.location.href.endsWith(t[t.length-1])},Z=function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)?e.username?e.phone?e.city?e.state?e.zip?isNaN(e.zip.split("-").join(""))&&(t.zip="Zip code must be a number"):t.zip="Zip is required":t.state="State is required":t.city="City is required":t.phone="Phone is required":t.username="Username is required":t.email="Invalid email address":t.email="Email is required",t},J={header:{display:"flex",justifyContent:"space-between"}},H=function(e){var t=e.sales,a=e.loadMore,n=e.loading,l=r.a.useState(),c=Object(x.a)(l,2),o=c[0],s=c[1],i=r.a.useState(0),m=Object(x.a)(i,2),d=m[0],E=m[1],b=Math.ceil(t.data.length/7);r.a.useEffect((function(){var e=function(){var e=7*d,a=e+7;return t.data.slice(e,a)}();s(function(e){return{labels:e.map((function(e){return B(e.createdAt,"Do MMM")})),datasets:[{label:"Sales",backgroundColor:"#3949ab",data:e.map((function(e){return e.qty}))},{label:"Profit($)",backgroundColor:"#e0e0e0",data:e.map((function(e){return e.profit}))}]}}(e))}),[d]);return r.a.createElement(r.a.Fragment,null,o&&r.a.createElement(f,null,r.a.createElement(g,null,r.a.createElement(p,{style:J.header},"Total Sales & Profit",r.a.createElement("div",null,r.a.createElement(D,{disabled:0===d,onClick:function(){E((function(e){return e-1}))}},r.a.createElement(u,null,"chevron_left")),r.a.createElement(D,{disabled:d>=b-1,onClick:function(){E((function(e){return e+1}))}},r.a.createElement(u,null,"chevron_right")),t.meta.hasNext&&r.a.createElement(D,{disabled:n,onClick:function(){return a(t.meta.nextCursor)}},r.a.createElement(u,null,"more")))),r.a.createElement(A.a,{data:o,options:q}))))},Y=a(3),G=a(14),Q=a.n(G),W=a(88),V=a.n(W),$=function(e){return V.a.create({baseURL:"https://nestjs-ecommerce-app.herokuapp.com/api/v1",headers:{authorization:"Bearer "+e}})},K=function(){var e={user:{role:""},access_token:""};try{return e=JSON.parse(localStorage.getItem("loggedIn_user"))}catch(t){return Ke({message:t.message,color:"red"}),console.log("error getting user ",t),e}},X=function(){return!!K()&&!!K().access_token},ee=function(){return!!X()&&"Admin"===K().user.role},te=function(){return!!X()&&"Customer"===K().user.role},ae=function(){return K().access_token},ne=function(){return K().user},re=function(){localStorage.removeItem("loggedIn_user")},le=function(e){try{localStorage.setItem("loggedIn_user",JSON.stringify(e))}catch(t){Ke({message:t.message,color:"red"}),console.log("error parsing string ",t)}},ce=function(e){return"/"===e.pathname},oe=[{name:"S/N",selector:"id",sortable:!0},{name:"Customer",selector:"customer",sortable:!0},{name:"Quantity",selector:"qty",sortable:!0},{name:"Status",selector:"status",sortable:!0},{name:"Amount($)",selector:"amount",sortable:!0},{name:"Date",selector:"createdAt",sortable:!0}],se=function(){var e=r.a.useState([]),t=Object(x.a)(e,2),a=t[0],n=t[1],l=r.a.useState(!1),c=Object(x.a)(l,2),o=c[0],s=c[1];return r.a.useEffect((function(){s(!0),$(ae()).get("/orders",{params:{relation:!0}}).then((function(e){s(!1);var t=e.data.data.map((function(e,t){return Object(Y.a)({},e,{customer:e.user.username,createdAt:B(e.createdAt),user:null,id:t+1})}));n(t)})).catch((function(e){s(!1),Ke({message:e.message,color:"red"})}))}),[]),r.a.createElement(r.a.Fragment,null,o&&r.a.createElement($e,null),!o&&r.a.createElement(f,null,r.a.createElement(g,null,r.a.createElement(Q.a,{title:"Orders Summary",columns:oe,data:a,highlightOnHover:!0}))))},ie=function(){var e=Object(n.useState)(!1),t=Object(x.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(null),c=Object(x.a)(l,2),o=c[0],s=c[1],i=Object(n.useState)(null),m=Object(x.a)(i,2),u=m[0],d=m[1];return{makeGetRequest:function(e){var t=e.authToken,a=e.params,n=e.url;r(!0),$(t).get(n,{params:a}).then((function(e){r(!1),d(e.data)})).catch((function(e){r(!1),s(e),console.log(e)}))},setData:d,setError:s,setLoading:r,loading:a,error:o,data:u}},me=function(){var e,t=r.a.useRef(null),a=ie(),n=a.makeGetRequest,l=a.data,c=a.loading,o=a.error;(r.a.useEffect((function(){var e={url:"/sales",authToken:ae()};n(e)}),[]),l)&&(e=t.current?[].concat(Object(d.a)(t.current.data),Object(d.a)(l.data)):Object(d.a)(l.data),t.current={data:Object(d.a)(I(e)),meta:l.meta});return o&&Ke({message:o.message,color:"red",outDuration:500}),r.a.createElement(et,null,c&&r.a.createElement($e,null),r.a.createElement(h,null,r.a.createElement(N,{sm:12,md:4},r.a.createElement(w,{customerCount:8473})),r.a.createElement(N,{sm:12,md:4},r.a.createElement(S,{productCount:632})),r.a.createElement(N,{sm:12,md:4},r.a.createElement(k,{orderCount:873}))),t.current&&t.current.data.length>0&&r.a.createElement(h,null,r.a.createElement(N,{sm:12},r.a.createElement(H,{loading:c,sales:t.current,loadMore:function(e){var t={url:"/sales",params:{cursor:e},authToken:ae()};n(t)}}))),r.a.createElement(h,null,r.a.createElement(N,{sm:12},r.a.createElement(se,null))))},ue=function(e){var t=e.onClick,a=e.deleting;return r.a.createElement(F,{disabled:a,className:"tooltipped red-text btn-flat delete-btn","data-position":"left","data-tooltip":"Delete",style:{cursor:"pointer"},onClick:t},r.a.createElement(u,{children:"close"}))},de=[{name:"Username",selector:"username",sortable:!0},{name:"Email",selector:"email",sortable:!0},{name:"Date Joined",selector:"createdAt",sortable:!0,right:!0},{selector:"edit",right:!0}],fe=function(e){return r.a.createElement(F,{onClick:function(){return e()},className:"right-align indigo "},"Add")},pe=function(e){var t=e.data,a=e.handleDelete,n=e.loading,l=e.openModal,c=t?function(e){return e.map((function(e){return Object(Y.a)({},e,{createdAt:B(e.createdAt),edit:r.a.createElement(ue,{key:e.id,deleting:n,onClick:function(){return a(e.id)}})})}))}(t):[];return r.a.createElement(f,null,r.a.createElement(Q.a,{title:"Employee List",columns:de,data:c,onSelectedRowsChange:function(e){},actions:fe(l),pagination:!0,noContextMenu:!0,onRowClicked:function(e){}}))},ge=a(1),Ee=function(e){var t=e.id,a=e.labelClassName,n=e.styleLabel,l=e.label,c=Object(m.a)(e,["id","labelClassName","styleLabel","label"]);return r.a.createElement("div",{className:Object(i.a)(["input-field",{"login-label":n}])},r.a.createElement(ge.b,Object.assign({},c,{id:t})),t&&l&&r.a.createElement("label",{className:a,htmlFor:t},l))};Ee.defaultProps={labelClassName:"active"};var be=Ee,he={login:{height:"100vh",marginBottom:0},header:{marginTop:0,padding:40},input:{padding:"5px 10px"}},ve=function(e){var t=e.handleAdd,a=e.closeModal,n=r.a.useState(""),l=Object(x.a)(n,2),c=l[0],o=l[1];return r.a.createElement(et,null,r.a.createElement(ge.d,{initialValues:{email:"",username:"",password:"",confirm:""},validate:function(e){o(e.password);var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)?e.username?e.password?e.password.length<6?t.password="Password length must be greater than 5":e.confirm!==c&&(t.confirm="Confirm password must match password field"):t.password="Password Required":t.username="Username Required":t.email="Invalid email address":t.email="Email Required",t},onSubmit:function(e,a){var n=a.setSubmitting,r={username:e.username,email:e.email,password:e.password,role:"Employee"};$(ae()).post("/users",Object(Y.a)({},r)).then((function(a){n(!1),Ke({message:"Employee Successfully Added",color:"green"});var r=Object(Y.a)({},e,{},a.data);t(r)})).catch((function(e){n(!1),Ke({message:e.message,color:"red"}),console.log(e.response)}))}},(function(e){var t=e.isSubmitting,n=e.submitForm;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement($e,null),r.a.createElement(ge.c,null,r.a.createElement(be,{name:"email",label:"Email Address",id:"email",autoComplete:"off",autoFocus:!0,style:he.input}),r.a.createElement(ge.a,{name:"email",component:"div",style:{color:"red"}}),r.a.createElement(be,{name:"username",label:"Username",id:"username",autoComplete:"off",autoFocus:!0,style:he.input}),r.a.createElement(ge.a,{name:"username",component:"div",style:{color:"red"}}),r.a.createElement(be,{name:"password",id:"password",label:"Password",autoComplete:"off",style:he.input,type:"password"}),r.a.createElement(ge.a,{name:"password",component:"div",style:{color:"red"}}),r.a.createElement(be,{name:"confirm",label:"Confirm Password",autoComplete:"off",id:"confirm",style:he.input,type:"password"}),r.a.createElement(ge.a,{name:"confirm",component:"div",style:{color:"red"}}),r.a.createElement("div",{className:" right-align"},r.a.createElement(D,{onClick:n,disabled:t,type:"submit"},"Submit"),r.a.createElement(D,{type:"button",onClick:a},"Cancel"))))})))},ye=function(){var e=ie(),t=e.makeGetRequest,a=e.setData,n=e.data,l=e.loading,c=e.error,o=r.a.useState(!1),s=Object(x.a)(o,2),i=s[0],m=s[1],u=r.a.useRef(null);r.a.useEffect((function(){var e={url:"/users",params:{role:"Employee"},authToken:ae()};t(e)}),[]),r.a.useEffect((function(){var e=document.querySelectorAll(".modal"),t=M.Modal.init(e);u.current=t[0];var a=document.querySelectorAll(".tooltipped");M.Tooltip.init(a)}));c&&Ke({message:c.message,color:"red",outDuration:500});var f=function(){u.current.close()};return r.a.createElement(et,null,l&&r.a.createElement($e,null),i&&r.a.createElement($e,null),r.a.createElement(Xe,{title:"Add Employee"},r.a.createElement(ve,{handleAdd:function(e){f(),a((function(t){return Object(Y.a)({},t,{data:[].concat(Object(d.a)(t.data),[e])})}))},closeModal:f})),r.a.createElement(pe,{openModal:function(){u.current.open()},data:n?n.data:[],handleDelete:function(e){m(!0),$(ae()).delete("/users/".concat(e)).then((function(t){m(!1),a((function(t){return Object(Y.a)({},t,{data:t.data.filter((function(t){return t.id!==e}))})})),Ke({message:"Successfully Deleted",color:"green"})})).catch((function(e){m(!1),Ke({message:e.message,color:"red"})}))},loading:i}))},Ne=[{name:"Username",selector:"username",sortable:!0},{name:"Email",selector:"email",sortable:!0},{name:"Address",selector:"address",sortable:!0},{name:"Date Joined",selector:"createdAt",sortable:!0}],Oe={recipients:{resize:"auto"}},Ce=function(e){var t=e.closeModal,a=e.selectedRows,n=r.a.useState(a||" "),l=Object(x.a)(n,2),c=l[0],o=l[1],s=r.a.useState(""),i=Object(x.a)(s,2),m=i[0],u=i[1],d=r.a.useState(""),f=Object(x.a)(d,2),p=f[0],g=f[1],E=r.a.useState(!1),b=Object(x.a)(E,2),v=b[0],y=b[1];return r.a.useEffect((function(){o(a)}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(h,null,r.a.createElement(N,{sm:12,className:"input-field"},r.a.createElement("textarea",{id:"email-ids",className:"materialize-textarea",value:c||"",onChange:function(e){o(e.target.value)},style:Oe.recipients}),r.a.createElement("label",{className:"active",htmlFor:"email-ids"},"Recipients"))),r.a.createElement(h,null,r.a.createElement(N,{sm:12,className:"input-field"},r.a.createElement("input",{id:"subject",type:"text",className:"validate",value:m,onChange:function(e){return u(e.target.value)}}),r.a.createElement("label",{htmlFor:"subject"},"Subject"))),r.a.createElement(h,null,r.a.createElement(N,{sm:12,className:"input-field"},r.a.createElement("textarea",{id:"message",className:"materialize-textarea",value:p,onChange:function(e){return g(e.target.value)}}),r.a.createElement("label",{htmlFor:"message"},"Message"))),v&&r.a.createElement($e,null),r.a.createElement("div",{className:"row right-align"},r.a.createElement(D,{onClick:function(){if(""!==m&&void 0!==m&&""!==p&&void 0!==p){var e;e=Array.isArray(c)?c:c.split(",");var a={name:"Tony Smith",email:"tonysmith@gmail.com",subject:m,recipients:e,message:p};y(!0),$(ae()).post("/email",Object(Y.a)({},a)).then((function(e){y(!1),Ke({message:"Email message successfully sent",color:"green"}),console.log("res",e),t()})).catch((function(e){y(!1),Ke({message:e.message,color:"red"}),console.log("error ",e.response)}))}else Ke({message:"Subject and message fields must be filled in",color:"red"})}},"Send"),r.a.createElement(D,{onClick:function(){return t()}},"Cancel")))},je=function(e){var t=e.closeModal,a=e.selectedRows;return r.a.createElement(Xe,{title:"Send Email to Selected Customer(s)",id:"send-email-modal"},r.a.createElement(Ce,{closeModal:t,selectedRows:a}))},we=function(e){var t=e.handleLoadMore,a=e.loadingMore;return r.a.createElement(F,{disabled:a,onClick:t,className:"right indigo"},"Load more")},Se=function(e){var t=e.openModal;return r.a.createElement(F,{className:"indigo",onClick:t},"Send Email")},ke=function(e){var t=e.response,a=e.loadMore,n=e.loadingMore,l=t.data,c=t.meta,o=r.a.useState(null),i=Object(x.a)(o,2),m=i[0],u=i[1],d=r.a.useRef(null),p=Object(s.g)();r.a.useEffect((function(){var e=document.querySelectorAll(".modal"),t=M.Modal.init(e);d.current=t[0]}));var g=l.length>0?function(e){return e.map((function(e){return Object(Y.a)({},e,{createdAt:B(e.createdAt)})}))}(l):[];return r.a.createElement(f,null,r.a.createElement(je,{closeModal:function(){d.current.close()},selectedRows:m&&m.selectedRows.map((function(e){return e.email}))}),r.a.createElement(Q.a,{title:"Customer List",columns:Ne,data:g,actions:function(e){return e.hasNext}(c)&&r.a.createElement(we,{loadingMore:n,handleLoadMore:function(){a(c.nextCursor)}}),onSelectedRowsChange:function(e){u(e)},contextActions:Se({openModal:function(){d.current.open()}}),selectableRows:!0,highlightOnHover:!0,pagination:!0,pointerOnHover:!0,onRowClicked:function(e){p.push("/customers/"+e.id)},selectableRowsHighlight:!0}))},xe=function(){var e=r.a.useRef({data:[],meta:{}}),t=ie(),a=t.makeGetRequest,n=t.data,l=t.loading,c=t.error;if(r.a.useEffect((function(){var e={url:"/users",params:{role:"Customer"},authToken:ae()};a(e)}),[]),n){var o=[].concat(Object(d.a)(e.current.data),Object(d.a)(n.data));e.current={data:Object(d.a)(I(o)),meta:n.meta}}return c&&Ke({message:c.message,color:"red",outDuration:500}),r.a.createElement(et,null,l&&r.a.createElement($e,null),r.a.createElement(ke,{loadingMore:l,response:e.current,loadMore:function(e){var t={url:"/users",params:{role:"Customer",cursor:e},authToken:ae()};a(t)}}))},Ae=function(e){var t=e.user,a=e.updateUser,n=e.closeModal;for(var l in delete t.orders,delete t.updatedAt,delete t.createdAt,t)null===t[l]&&(t[l]="");return r.a.createElement(et,null,r.a.createElement(ge.d,{initialValues:Object(Y.a)({},t),validate:function(e){return Z(e)},onSubmit:function(e,t){var n=t.setSubmitting;$(ae()).put("/users/".concat(e.id),Object(Y.a)({},e)).then((function(t){n(!1),a(e),Ke({message:"Profile Successfully Edited",color:"green"})})).catch((function(e){n(!1),Ke({message:e.message,color:"red"}),console.log("e ",e.response)}))}},(function(e){var t=e.isSubmitting,a=e.submitForm;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.c,null,r.a.createElement(it,null),r.a.createElement("div",{className:" right-align"},r.a.createElement(D,{onClick:a,disabled:t,type:"submit"},"Submit"),r.a.createElement(D,{type:"button",onClick:n},"Cancel"))),t&&r.a.createElement($e,null))})))},Re=function(){var e=ne().id,t=ie(),a=t.makeGetRequest,n=t.setData,l=t.data,c=t.loading,o=t.error,s=r.a.useRef(null);r.a.useEffect((function(){var t={url:"/users/".concat(e,"/orders"),params:{role:"Customer"},authToken:ae()};a(t)}),[e]),r.a.useEffect((function(){var e=document.querySelectorAll(".modal"),t=M.Modal.init(e);s.current=t[0]})),o&&Ke({message:o.message,color:"red",outDuration:500});var i=function(){s.current.close()};return r.a.createElement(et,null,c&&r.a.createElement($e,null),r.a.createElement(Xe,{title:"Edit Profile Info"},ne()?r.a.createElement(Ae,{closeModal:i,updateUser:function(e){n(Object(Y.a)({},l,{data:Object(Y.a)({},l.data,{},e)})),i()},user:Object(Y.a)({},ne())}):null),r.a.createElement(rt,{user:l&&l.data,isCustomer:te(),isAdmin:ee(),openModal:function(){s.current.open()}}))},Me=[{name:"Name",selector:"name",sortable:!0},{name:"Available",selector:"available",sortable:!0},{name:"Category",selector:"category",sortable:!0},{name:"Price",selector:"price",sortable:!0},{name:"Date Added",selector:"createdAt",sortable:!0,right:!0}],Pe={login:{height:"100vh",marginBottom:0},header:{marginTop:0,padding:40},input:{padding:"5px 10px"}},qe={name:"",description:"",price:"",available:"",total:"",category:""},Te=function(e){var t=e.updateProductList,a=e.closeModal,n=r.a.useState(null),l=Object(x.a)(n,2),c=l[0],o=l[1],s=r.a.useState([]),i=Object(x.a)(s,2),m=i[0],u=i[1];r.a.useEffect((function(){$(ae()).get("/categories").then((function(e){u(e.data.data)})).catch((function(e){console.log("error ",e.response)}))}),[]);var d=function(e){o(e.target.files[0])},f=m.length>0?m.map((function(e){return r.a.createElement("option",{key:e.id,value:e.name},e.name)})):r.a.createElement("option",{value:""},"No categories added yet!");return r.a.createElement(et,null,r.a.createElement(ge.d,{initialValues:Object(Y.a)({},qe),validate:function(e){var t={};return e.name?e.description?e.price?e.total?e.category?e.available||(t.available="Product availability is required"):t.category="Category of product is required":t.total="Quantity of product is required":t.price="Price of product is required":t.description="Description of product is required":t.name="Name of product is required",t},onSubmit:function(e,n){var r=n.setSubmitting,l=new FormData;l.append("file",c);var o=function(t){if("category"===t){var a=m.filter((function(a){return a.name===e[t]}));l.append(t,a[0].id)}else l.append(t,e[t])};for(var s in e)o(s);$(ae()).post("/products",l,{headers:{"content-type":"multipart/form-data"}}).then((function(n){r(!1),Ke({message:"Product successfully Added",color:"green"}),t(Object(Y.a)({},n.data,{},e)),a()})).catch((function(e){r(!1),console.log(e.response)}))}},(function(e){var t=e.isSubmitting,n=e.submitForm;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.c,null,r.a.createElement(be,{id:"name",name:"name",label:"Name",autoComplete:"off",type:"text",style:Pe.input}),r.a.createElement(ge.a,{name:"name",component:"div",style:{color:"red"}}),r.a.createElement(be,{name:"description",label:"Description",autoComplete:"off",type:"text",id:"description",style:Pe.input}),r.a.createElement(ge.a,{name:"description",component:"div",style:{color:"red"}}),r.a.createElement(be,{id:"total",name:"total",label:"Quantity",autoComplete:"off",style:Pe.input,type:"number"}),r.a.createElement(ge.a,{name:"total",component:"div",style:{color:"red"}}),r.a.createElement(be,{id:"price",name:"price",label:"Price",autoComplete:"off",style:Pe.input,type:"number"}),r.a.createElement(ge.a,{name:"price",component:"div",style:{color:"red"}}),r.a.createElement(ge.b,{name:"category",as:"select",style:{display:"block",backgroundColor:"inherit"}},r.a.createElement("option",{value:""},"Select Category"),f),r.a.createElement(ge.a,{name:"category",component:"div",style:{color:"red"}}),r.a.createElement(ge.b,{name:"available",as:"select",style:{display:"block",backgroundColor:"inherit",marginTop:15}},r.a.createElement("option",{value:""},"Available?"),r.a.createElement("option",{value:"1"},"True"),r.a.createElement("option",{value:"0"},"False")),r.a.createElement(ge.a,{name:"category",component:"div",style:{color:"red"}}),r.a.createElement("div",{className:"file-field input-field"},r.a.createElement("div",{className:"btn indigo"},r.a.createElement("span",null,"Photo"),r.a.createElement("input",{type:"file",onInput:d})),r.a.createElement("div",{className:"file-path-wrapper"},r.a.createElement("input",{className:"file-path validate",type:"text",onInput:d}))),r.a.createElement("div",{className:" right-align",style:{marginTop:20}},r.a.createElement(D,{onClick:n,disabled:t,type:"submit"},"Submit"),r.a.createElement(D,{disabled:t,type:"button",onClick:function(){return a()}},"Cancel"))),t&&r.a.createElement($e,null))})))},Fe=function(e){var t=e.closeModal,a=e.updateProductList;return r.a.createElement(Xe,{id:"product-modal",title:"Add New Product"},r.a.createElement(Te,{closeModal:t,updateProductList:a}))},De=function(e){var t=e.response,a=e.loadMore,n=e.loadingMore,l=e.updateProductList,c=t.data,o=t.meta,i=r.a.useRef(null),m=Object(s.g)();r.a.useEffect((function(){var e=document.querySelectorAll(".modal"),t=M.Modal.init(e);i.current=t[0]}));var u=function(){i.current.open()},d=function(e){return e.hasNext},p=function(){a(o.nextCursor)},g=c.length>0?function(e){return e.map((function(e){return Object(Y.a)({},e,{createdAt:B(e.createdAt),category:e.category.name,available:e.available?"true":"false"})}))}(c):[];return r.a.createElement(f,null,r.a.createElement(Fe,{closeModal:function(){i.current.close()},updateProductList:l}),r.a.createElement(Q.a,{title:"Product List",columns:Me,data:g,actions:r.a.createElement("div",null,d(o)&&r.a.createElement(D,{disabled:n,onClick:p,className:"right"},"Load more"),r.a.createElement(D,{disabled:n,onClick:u,className:"right"},"Add Product")),highlightOnHover:!0,pagination:!0,pointerOnHover:!0,onRowClicked:function(e){m.push("/products/"+e.id)},selectableRowsHighlight:!0}))},_e=function(){var e=r.a.useRef({data:[],meta:{}}),t=ie(),a=t.makeGetRequest,n=t.setData,l=t.data,c=t.loading,o=t.error;r.a.useEffect((function(){var e={url:"/products",params:{relation:!0},authToken:ae()};a(e)}),[]);if(l){var s=[].concat(Object(d.a)(e.current.data),Object(d.a)(l.data));e.current={data:Object(d.a)(function(e){return e.reduce((function(e,t){var a=e;return e.indexOf(t)>-1?e:(a.push(t),a)}),[])}(s)),meta:l.meta}}return o&&Ke({message:o.message,color:"red",outDuration:500}),r.a.createElement(et,null,c&&r.a.createElement($e,null),r.a.createElement(De,{loadingMore:c,updateProductList:function(e){n((function(t){return Object(Y.a)({},t,{data:[].concat(Object(d.a)(t.data),[e])})}))},response:e.current,loadMore:function(e){var t={url:"/products",params:{cursor:e,relation:!0},authToken:ae()};a(t)}}))},ze=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("ul",Object.assign({className:Object(i.a)(["collection",a])},n),t)},Le=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("li",Object.assign({className:Object(i.a)(["collection-item",a])},n),t)},Be=function(e){var t=e.children,a=e.className,n=Object(m.a)(e,["children","className"]);return r.a.createElement("li",Object.assign({className:Object(i.a)(["collection-header",a])},n),t)},Ie=function(e){var t=e.category,a=t.products.length>0?t.products.map((function(e){return function(e){return r.a.createElement(Le,{className:"avatar",key:e.id},r.a.createElement("p",null,r.a.createElement("span",{className:"title"},"Name: "),e.name,r.a.createElement("br",null),r.a.createElement("span",{className:"title"},"Price: "),e.price,r.a.createElement("br",null),r.a.createElement("span",{className:"title"},"Still in Stock?: "),+e.available?"Yes":"No",r.a.createElement("br",null),r.a.createElement("span",{className:"title"},"Quantity: "),e.total,r.a.createElement("br",null)),r.a.createElement(D,{className:"secondary-content red-text delete-btn"},r.a.createElement(u,{children:"close"})))}(e)})):r.a.createElement(Le,null,"No product under ",t.name," category");return r.a.createElement(ze,{className:"with-header ",style:{marginTop:60}},r.a.createElement(Be,{className:"indigo-text center-align"},r.a.createElement("h6",null,"Products on ",t.name," Category")),a)},Ue=function(e){var t=e.category,a=e.handleSaveChanges,n=e.handleDelete,l=e.loading,c=e.handleSave,o=r.a.useState(t),s=Object(x.a)(o,2),i=s[0],m=s[1];r.a.useEffect((function(){m(t)}),[t]);return r.a.createElement(h,{style:{marginTop:20}},r.a.createElement(N,{sm:12,md:8,mdOffset:2,className:"input-field"},r.a.createElement("label",{className:"active",htmlFor:"category"},"Name of category"),r.a.createElement("input",{placeholder:"Enter name of category",id:"category",type:"text",autoComplete:"off",value:i?i.name:"",onChange:function(e){var t=e.target;m((function(e){return Object(Y.a)({},e,{name:t.value})}))}})),r.a.createElement(N,{sm:12,className:"right-align",style:{marginTop:30}},!t&&r.a.createElement(D,{disabled:l,onClick:function(){c(i)}},"Save"),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(D,{disabled:l,onClick:function(){a(i)}},"Save Changes"),r.a.createElement(D,{onClick:function(){return n(t.id)},disabled:l,className:"delete-category"},"Delete"))),t&&r.a.createElement(N,{sm:12},r.a.createElement(Ie,{category:t})))},Ze=function(){var e=ie(),t=e.makeGetRequest,a=e.setData,n=e.setLoading,l=e.setError,c=e.data,o=e.loading,s=e.error,i=r.a.useState(null),m=Object(x.a)(i,2),E=m[0],v=m[1];r.a.useEffect((function(){var e={url:"/categories",params:{relation:!0},authToken:ae()};t(e)}),[]);s&&Ke({message:s.message,color:"red"});var y=c&&c.data.length>0?c.data.map((function(e){return r.a.createElement(Le,{onClick:function(){return v(e)},key:e.id,className:"category-item activator"},e.name)})):"No product category added yet";return r.a.createElement(r.a.Fragment,null,o&&r.a.createElement($e,null),r.a.createElement(et,null,r.a.createElement(h,null,r.a.createElement(N,{sm:12,md:10,mdOffset:1},r.a.createElement(f,null,r.a.createElement(g,{className:"categories"},r.a.createElement(T,{className:"btn-large activator halfway-fab  indigo"},r.a.createElement(u,{children:"add"})),r.a.createElement(ze,{className:"with-header"},r.a.createElement(Be,null,r.a.createElement("h5",{className:"indigo-text center-align"},"Product Categories")),y)),r.a.createElement(b,null,r.a.createElement(p,{className:"indigo-text center-align",onClick:function(){return v(null)}},E?"Edit Category":"Add New Category",r.a.createElement(u,{children:"close",className:"right"})),r.a.createElement(Ue,{category:E,handleSaveChanges:function(e){n(!0),$(ae()).put("/categories/"+e.id,{name:e.name,total:e.total}).then((function(t){n(!1),Ke({message:"Successfully Edited",color:"green"}),a((function(t){var a=t.data.map((function(t){return t.id===e.id?e:t}));return Object(Y.a)({},t,{data:Object(d.a)(a)})}))})).catch((function(e){n(!1),l(e),console.log("error ",e.response)}))},loading:o,handleDelete:function(e){n(!0),$(ae()).delete("/categories/"+e).then((function(t){n(!1),Ke({message:"Successfully Edited",color:"green"}),a((function(t){return Object(Y.a)({},t,{data:Object(d.a)(t.data.filter((function(t){return t.id===e})))})}))})).catch((function(e){n(!1),l(e),console.log("error ",e.response)}))},handleSave:function(e){n(!0),$(ae()).post("/categories",e).then((function(e){n(!1),Ke({message:"Successfully Saved",color:"green"}),a((function(t){return Object(Y.a)({},t,{data:[].concat(Object(d.a)(t.data),[Object(Y.a)({},e.data,{products:[]})])})}))})).catch((function(e){n(!1),l(e),console.log("error ",e.response)}))}})))))))},Je={input:{padding:"5px 10px"}},He=function(e){var t=e.user,a=e.updateUser;delete t.updatedAt,delete t.createdAt;return r.a.createElement(f,{style:{padding:40,paddingTop:0}},r.a.createElement(g,null,r.a.createElement(p,{className:"center-align",style:{paddingBottom:20},children:"Edit Profile Details"}),r.a.createElement(ge.d,{initialValues:Object(Y.a)({},t),validate:function(e){var a={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)?e.username?"Employee"===t.role&&(e.address?e.city?e.state?e.zip?isNaN(e.zip.split("-").join(""))&&(a.zip="Zip code must be a number"):a.zip="Zip Required":a.state="State Required":a.city="City Required":a.address="Address Required"):a.username="Username Required":a.email="Invalid email address":a.email="Email Required",a},onSubmit:function(e,t){var n=t.setSubmitting;$(ae()).put("/users/".concat(e.id),Object(Y.a)({},e)).then((function(t){n(!1),a(e),Ke({message:"Profile Successfully Edited",color:"green"})})).catch((function(e){n(!1),Ke({message:e.message,color:"red"}),console.log("e ",e.response)}))}},(function(e){var t=e.isSubmitting,a=e.submitForm;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.c,null,r.a.createElement(be,{id:"email",name:"email",label:"Email Address",autoComplete:"off",style:Je.input,labelClassName:"active"}),r.a.createElement(ge.a,{name:"email",component:"div",style:{color:"red"}}),r.a.createElement(be,{name:"username",label:"Username",autoComplete:"off",id:"username",style:Je.input,labelClassName:"active"}),r.a.createElement(ge.a,{name:"username",component:"div",style:{color:"red"}}),r.a.createElement(be,{id:"address",name:"address",label:"Address",autoComplete:"off",style:Je.input,labelClassName:"active",type:"text"}),r.a.createElement(ge.a,{name:"address",component:"div",style:{color:"red"}}),r.a.createElement(be,{id:"city",name:"city",label:"City",autoComplete:"off",style:Je.input,labelClassName:"active",type:"text"}),r.a.createElement(ge.a,{name:"city",component:"div",style:{color:"red"}}),r.a.createElement(be,{id:"state",name:"state",label:"State",autoComplete:"off",style:Je.input,labelClassName:"active",type:"text"}),r.a.createElement(ge.a,{name:"state",component:"div",style:{color:"red"}}),r.a.createElement(be,{id:"zip",name:"zip",label:"Zip",autoComplete:"off",style:Je.input,labelClassName:"active",type:"text"}),r.a.createElement(ge.a,{name:"zip",component:"div",style:{color:"red"}}),r.a.createElement(D,{className:"right ",onClick:a,disabled:t,type:"submit"},"Save")),t&&r.a.createElement($e,null))}))))},Ye={login:{height:"100vh",marginBottom:0},header:{marginTop:0,padding:40},input:{padding:"5px 10px"}},Ge=function(e){e.handleAdd;var t=r.a.useState(""),a=Object(x.a)(t,2),n=a[0],l=a[1];return r.a.createElement(f,{style:{paddingBottom:40}},r.a.createElement(g,null,r.a.createElement(p,{style:{paddingBottom:20},children:"Reset Password"}),r.a.createElement(ge.d,{initialValues:{password:"",confirm:""},validate:function(e){l(e.password);var t={};return e.password?e.password.length<6?t.password="Password length must be greater than 5":e.confirm!==n&&(t.confirm="Confirm password must match password field"):t.password="Password Required",t},onSubmit:function(e,t){var a=t.setSubmitting;setTimeout((function(){a(!1)}),4e3)}},(function(e){var t=e.isSubmitting,a=e.submitForm;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement($e,null),r.a.createElement(ge.c,null,r.a.createElement(be,{name:"password",id:"password",label:"Password",autoComplete:"off",style:Ye.input,type:"password"}),r.a.createElement(ge.a,{name:"password",component:"div",style:{color:"red"}}),r.a.createElement(be,{name:"confirm",label:"Confirm Password",autoComplete:"off",style:Ye.input,type:"password",id:"confirm"}),r.a.createElement(ge.a,{name:"confirm",component:"div",style:{color:"red"}}),r.a.createElement(D,{className:"right",onClick:a,disabled:t,type:"submit"},"Save")))}))))},Qe=function(){var e=ne();for(var t in e)null===e[t]&&(e[t]="");return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"center-align indigo-text",style:{marginBottom:30}},"Account Settings"),r.a.createElement(et,null,r.a.createElement(h,null,r.a.createElement(N,{sm:12,md:8,mdOffset:2},r.a.createElement(He,{user:e})),r.a.createElement(N,{sm:12,md:8,mdOffset:2},r.a.createElement(Ge,null)))))},We=function(){var e=r.a.useState(!1),t=Object(x.a)(e,2),a=t[0],n=t[1];return r.a.createElement(et,null,r.a.createElement(h,null,r.a.createElement(N,{sm:12,md:8,mdOffset:2},a&&r.a.createElement($e,null),r.a.createElement(f,null,r.a.createElement(g,null,r.a.createElement(p,{className:"indigo-text"},"Re-generate the store"),r.a.createElement("p",null,"You are only expected to re-generate the store, the customer-facing end, whenever you make changes to your products and categories and you wish the customers to see those changes when they visit your website. Other than this scenario, you should have no reasons to perform this action. Click the button bellow to re-generate.")),r.a.createElement(E,{className:"right-align"},r.a.createElement(D,{onClick:function(){n(!0),setTimeout((function(){n(!1),Ke({message:"Request successfully sent",color:"green"})}),1e3),console.log("regenerating...")}},"Generate"))))))},Ve=function(){return r.a.createElement("footer",{className:"page-footer indigo darken-4 white-text"},r.a.createElement(et,null,r.a.createElement(h,null,r.a.createElement(N,{sm:4,smOffset:2,md:3,mdOffset:3},r.a.createElement("h5",null,"About"),r.a.createElement("ul",{className:"white-text"},r.a.createElement("li",null,r.a.createElement("a",{className:"white-text",href:"#!"},"Blog")))),r.a.createElement(N,{sm:4,smOffset:2,md:3,mdOffset:3},r.a.createElement("h5",null,"Contact"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{className:"white-text",href:"#!"},"Twitter")),r.a.createElement("li",null,r.a.createElement("a",{className:"white-text",href:"#!"},"Facebook")),r.a.createElement("li",null,r.a.createElement("a",{className:"white-text",href:"#!"},"Github"))))),r.a.createElement(h,null,r.a.createElement(N,{sm:12},r.a.createElement("div",{className:"footer-copyright center-align"},r.a.createElement(et,null,"\xa9 ",(new Date).getFullYear()," wedoyourfarm.com"))))))},$e=(r.a.createElement("i",{className:"material-icons"},"dashboard"),r.a.createElement(me,null),r.a.createElement("i",{className:"material-icons"},"person"),r.a.createElement(Re,null),r.a.createElement("i",{className:"material-icons"},"people"),r.a.createElement(ye,null),r.a.createElement("i",{className:"material-icons"},"people"),r.a.createElement(xe,null),r.a.createElement("i",{className:"material-icons"},"shopping_basket"),r.a.createElement(_e,null),r.a.createElement("i",{className:"material-icons"},"category"),r.a.createElement(Ze,null),r.a.createElement("i",{className:"material-icons"},"settings"),r.a.createElement(Qe,null),r.a.createElement("i",{className:"material-icons"},"build"),r.a.createElement(We,null),function(e){return r.a.createElement("div",Object.assign({className:"progress indigo"},e),r.a.createElement("div",{className:"indeterminate indigo lighten-4"}))}),Ke=function(e){var t=e.message,a=e.color,n=e.outDuration;M.toast({html:t,classes:a,outDuration:n||375})},Xe=function(e){var t=e.children,a=e.id,n=e.title;return r.a.createElement(f,null,r.a.createElement("div",{id:a,className:"modal"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("h5",{className:"center-align indigo-text"},n),t)))},et=function(e){var t=e.children;Object(m.a)(e,["children"]);return r.a.createElement("div",{className:"container"},t)},tt=[{name:"S/N",selector:"id",sortable:!0},{name:"Quantity",selector:"qty",sortable:!0},{name:"Status",selector:"status",sortable:!0},{name:"Amount($)",selector:"amount",sortable:!0},{name:"Date",selector:"createdAt",sortable:!0}],at=function(e){var t,a=e.orders,n=e.title,l=r.a.useState(null),c=Object(x.a)(l,2),o=c[0],s=c[1],i=r.a.useRef(null),m=a.length>0?function(e){return e.map((function(e,t){return Object(Y.a)({},e,{createdAt:B(e.createdAt),id:t+1})}))}(a):a;return r.a.createElement(f,null,r.a.createElement(g,null,r.a.createElement("button",{ref:i,className:"activator",style:{display:"none"}}),r.a.createElement(Q.a,{title:n,columns:tt,data:m,highlightOnHover:!0,pointerOnHover:!0,onRowClicked:function(e){s(e),i.current.click()}})),r.a.createElement(b,null,r.a.createElement(p,{className:"indigo-text center-align"},"Order Details",r.a.createElement(u,{children:"close",className:"right"})),o&&r.a.createElement(ze,null,r.a.createElement(Le,null,r.a.createElement(h,null,r.a.createElement(N,{sm:12,md:4},r.a.createElement("div",null,"Product(s) Ordered:")),r.a.createElement(N,{sm:12,md:8},(t=o.items,JSON.parse(t).map((function(e){return r.a.createElement("div",{key:e.id+e.name},"Name: ",e.name,", Qty: ",e.qty)})))))),r.a.createElement(Le,null,"Total Quantity: ",o.qty),r.a.createElement(Le,null,"Total Amount: ",o.amount),r.a.createElement(Le,null,"Status: ",o.status),r.a.createElement(Le,null,"Date Ordered: ",o.createdAt),r.a.createElement(Le,null,"Currency: ",o.currency))))},nt={userField:{fontWeight:600}},rt=function(e){var t=e.user,a=e.isCustomer,n=e.openModal,l=Object(s.g)();return r.a.createElement(f,null,t&&r.a.createElement(g,null,r.a.createElement(ze,{className:"with-header"},r.a.createElement(Be,{className:"indigo-text"},r.a.createElement("span",{className:"user-profile-detail-title"},a||"Customer"!==t.role?"User Profile Details":"Customer Profile")),function(e){var t={Username:e.username,Email:e.email,Phone:e.phone,City:e.city,State:e.state,Zip:e.zip};return Object.keys(t).map((function(e,a){return r.a.createElement(Le,{key:a},r.a.createElement("span",{style:nt.userField},e,": "),t[e])}))}(t),"Customer"===t.role&&r.a.createElement(Le,null,r.a.createElement("span",{style:nt.userField},"Date Joined:")," ",B(t.createdAt)),a&&r.a.createElement(Le,{className:"right"},r.a.createElement(D,{onClick:function(){re(),l.replace("/login")}},"SignOut"))),a&&r.a.createElement(T,{style:{marginTop:20},onClick:function(){return n()},className:"halfway-fab  right indigo"},r.a.createElement(u,{children:"edit"})),!a&&"Customer"!==t.role&&r.a.createElement(T,{style:{marginTop:20},onClick:function(){return l.push("/settings")},className:"right halfway-fab  indigo"},r.a.createElement(u,{children:"edit"}))),r.a.createElement("div",{id:"order-table"},t&&"Customer"===t.role&&r.a.createElement(at,{title:a?r.a.createElement("span",null,"Your Orders"):r.a.createElement("span",null,"Customer Orders"),orders:t&&t.orders?t.orders:[]})))},lt={login:{height:"100vh",marginBottom:0},header:{marginTop:0,padding:40},input:{padding:"15px",borderRadius:"5px",boxSizing:"border-box",color:"#fff",fontSize:"18px"}},ct=function(e){var t=e.handleSubmit,a=e.adminRoute,n=Object(s.g)(),l=function(){n.replace("/register")};return r.a.createElement(h,{className:"grey lighten-5 login",style:lt.login},r.a.createElement("h2",{className:"header center-align white-text",style:lt.header},"Sign In"),r.a.createElement(h,null,r.a.createElement(N,{sm:12,md:8,mdOffset:2},r.a.createElement(et,null,r.a.createElement(ge.d,{initialValues:{username:"",password:""},validate:function(e){var t={};return e.username?e.password||(t.password="Password is required"):t.username="Username is required",t},onSubmit:t},(function(e){var t=e.isSubmitting,n=e.submitForm;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement($e,null),r.a.createElement(ge.c,null,r.a.createElement(be,{type:"text",name:"username",label:"Username",id:"username",autoFocus:!0,styleLabel:"login-label",style:Object(Y.a)({},lt.input,{marginBottom:20})}),r.a.createElement(ge.a,{name:"username",component:"div",style:{color:"orange",marginBottom:30}}),r.a.createElement(be,{label:"Password",type:"password",name:"password",id:"password",styleLabel:"login-label",autoComplete:"off",style:Object(Y.a)({},lt.input)}),r.a.createElement(ge.a,{name:"password",component:"div",style:{color:"orange",marginBottom:30}}),r.a.createElement("div",{className:" right-align"},!a&&r.a.createElement(_,{className:"login-btn",onClick:l,type:"submit"},"Sign Up"),r.a.createElement(_,{className:"login-btn",onClick:n,disabled:t,type:"submit"},"Sign In"))))}))))))},ot=ct;ct.defaultProps={adminRoute:!1};var st={input:{padding:"5px 10px"}},it=function(e){var t=e.inputStyle;return r.a.createElement(r.a.Fragment,null,r.a.createElement(be,{id:"email",name:"email",autoComplete:"off",type:"email",label:"Email Address",autoFocus:!0,style:t||st.input,labelClassName:t&&"noactive"}),r.a.createElement(ge.a,{name:"email",component:"div",style:{color:t?"orange":"red",marginBottom:t&&"30px"}}),r.a.createElement(be,{name:"username",label:"Username",autoComplete:"off",type:"text",id:"username",style:t||st.input,labelClassName:t&&"noactive"}),r.a.createElement(ge.a,{name:"username",component:"div",style:{color:t?"orange":"red",marginBottom:t&&"30px"}}),r.a.createElement(be,{id:"phone",name:"phone",label:"Phone",autoComplete:"off",style:t||st.input,labelClassName:t&&"noactive",type:"text"}),r.a.createElement(ge.a,{name:"phone",component:"div",style:{color:t?"orange":"red",marginBottom:t&&"30px"}}),r.a.createElement(be,{id:"city",name:"city",label:"City",autoComplete:"off",style:t||st.input,labelClassName:t&&"noactive",type:"text"}),r.a.createElement(ge.a,{name:"city",component:"div",style:{color:t?"orange":"red",marginBottom:t&&"30px"}}),r.a.createElement(be,{id:"state",name:"state",label:"State",autoComplete:"off",style:t||st.input,labelClassName:t&&"noactive",type:"text"}),r.a.createElement(ge.a,{name:"state",component:"div",style:{color:t?"orange":"red",marginBottom:t&&"30px"}}),r.a.createElement(be,{id:"zip",name:"zip",label:"Zip",autoComplete:"off",style:t||st.input,labelClassName:t&&"noactive",type:"text"}),r.a.createElement(ge.a,{name:"zip",component:"div",style:{color:t?"orange":"red",marginBottom:t&&"30px"}}))},mt=function(){var e=Object(s.g)();r.a.useEffect((function(){document.body.classList.remove("has-fixed-sidenav")}),[]);return r.a.createElement(ot,{handleSubmit:function(t,a){var n=a.setSubmitting;$().post("/auth/login",{username:t.username.trim(),password:t.password.trim()}).then((function(t){if(n(!1),"Customer"!==t.data.user.role)return e.replace("/login");le(t.data),e.push("/dashboard")})).catch((function(e){n(!1),console.log("error ",e.response),Ke({message:e.message,color:"red"})}))}})},ut=function(){return r.a.createElement(h,null,r.a.createElement(N,{sm:12,md:10,mdOffset:1},r.a.createElement(Re,null)))},dt={login:{marginBottom:0},action:{display:"flex",justifyContent:"space-between",alignItems:"center"},header:{marginTop:0,padding:40},input:{padding:"15px",borderRadius:"5px",boxSizing:"border-box",marginBottom:25,color:"#fff",fontSize:"18px"}},ft={email:"",username:"",password:"",address:"",city:"",state:"",zip:""},pt=function(){var e=Object(s.g)();r.a.useEffect((function(){document.body.classList.remove("has-fixed-sidenav")}),[]);return r.a.createElement(h,{className:"login",style:dt.login},r.a.createElement(N,{sm:12,md:8,mdOffset:2},r.a.createElement(f,{className:"transparent"},r.a.createElement(g,null,r.a.createElement(p,{className:"white-text center-align"},"Sign Up"),r.a.createElement(ge.d,{initialValues:ft,validate:function(e){var t=Z(e);return e.password?e.password.length<6&&(t.password="Password length must be at least 6 characters"):t.password="Password is required",t},onSubmit:function(e,t){var a=t.setSubmitting;$().post("/users",Object(Y.a)({},e,{role:"Customer"})).then((function(e){a(!1),Ke({message:"Successfully registered, click login button bellow to sign in",color:"green"})})).catch((function(e){a(!1),Ke({message:e.message,color:"red"}),console.log("e ",e.response)}))}},(function(t){var a=t.isSubmitting,n=t.submitForm;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.c,{id:"register-form"},r.a.createElement(it,{inputStyle:dt.input}),r.a.createElement(be,{name:"password",label:"Password",autoComplete:"off",type:"password",id:"password",style:dt.input,labelClassName:"noactive"}),r.a.createElement(ge.a,{name:"password",component:"div",style:{color:"orange",marginBottom:30}}),r.a.createElement("div",{className:"register-action-buttons-container"},r.a.createElement(_,{className:"login-btn",onClick:n,disabled:a,type:"submit"},"Sign Up"),r.a.createElement("div",null,r.a.createElement("span",{style:{fontWeight:500,display:"inline-block",marginRight:10,color:"#fff"}},"Already have an account?"),r.a.createElement(_,{className:"login-btn",onClick:function(){return e.push("/login")}},"Sign In")))),a&&r.a.createElement($e,{style:{marginBottom:30}}))}))))))},gt=a(23),Et=a(92),bt=a(56),ht=a.n(bt),vt=a(93),yt=function(){var e=r.a.useState(),t=Object(x.a)(e,2),a=t[0],n=t[1],l=r.a.useState(!1),c=Object(x.a)(l,2),o=c[0],s=c[1],i=r.a.useState(),m=Object(x.a)(i,2),u=m[0],d=m[1];return{checkout:function(e){var t=e.authToken,a=e.data,r=e.stripe,l=e.card;s(!0),function(e){var t=e.authToken,a=e.data;return $(t).post("/create-payment-intent",a)}({authToken:t,data:a}).then((function(e){var t;return console.log("Response from my server ",e),t=e.data.orderId,localStorage.setItem("order_id",JSON.stringify(t)),function(e){var t=ne(),a=e.client_secret,n=e.stripe,r=e.card;return n.confirmCardPayment(a,{payment_method:{card:r,billing_details:{name:t.username,email:t.email,phone:t.phone,address:{city:t.city,state:t.state,postal_code:t.zip}}}})}({client_secret:e.data.client_secret,stripe:r,card:l})})).then((function(e){if(s(!1),e&&e.error)return d(e);n(e)})).catch((function(e){s(!1),d(e)}))},response:a,error:u,loading:o}},Nt=(a(216),{style:{base:{color:"#32325d",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}}),Ot=function(){return r.a.createElement(gt.CardElement,{options:Nt})},Ct=function(){var e=Object(gt.useStripe)(),t=Object(gt.useElements)(),a=yt(),n=a.checkout,l=a.loading,c=a.response,o=a.error;c&&(Ke({message:"Transaction successful",color:"green"}),localStorage.removeItem("loggedIn_user_cart"),$(ae()).put("/orders/"+JSON.parse(localStorage.getItem("order_id")),{status:"completed"}).catch((function(e){return console.log("error updating order",e)})));var s=function(e,t){var a=ne(),n=0,r=0,l=[];for(var c in e)n+=e[c].qty,r+=e[c].amount,l.push({name:c,qty:e[c].qty});return{user:a.id,qty:n,amount:r,status:"pending",items:JSON.stringify(l),currency:t||"usd"}},i=function(){var a=Object(vt.a)(ht.a.mark((function a(r){var l,c,o;return ht.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.preventDefault(),localStorage.getItem("loggedIn_user_cart")){a.next=3;break}return a.abrupt("return");case 3:if(l=JSON.parse(localStorage.getItem("loggedIn_user_cart")),c=s(l),e&&t){a.next=7;break}return a.abrupt("return");case 7:o={authToken:ae(),card:t.getElement(gt.CardElement),data:c,stripe:e},n(o);case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,l&&r.a.createElement($e,null),o&&Ke({message:o.message,color:"red"}),r.a.createElement(h,{style:{marginTop:40}},r.a.createElement(N,{sm:12,md:8,mdOffset:2},r.a.createElement(f,null,r.a.createElement(g,null,r.a.createElement(p,{className:"center-align indigo-text"},"Enter Your Card Details"),r.a.createElement(Ot,null),r.a.createElement(E,null,r.a.createElement(D,{onClick:i,disabled:!e||l,className:"right"},"Confrim Orders")))))))},jt=Object(Et.a)("pk_test_1JoaQRJQ3zfT4LiF9U6mnoKP00XL12OHOY"),wt=function(){return r.a.createElement(gt.Elements,{stripe:jt},r.a.createElement(Ct,null))},St=[{url:"/dashboard",name:"Dashboard",icon:r.a.createElement(u,{children:"dashboard"}),component:r.a.createElement(ut,null)},{url:"/checkout",name:"Checkout",icon:r.a.createElement(u,{children:"shopping_cart"}),component:r.a.createElement(wt,null)}],kt=function(){return r.a.createElement("div",{className:"navbar-fixed"},r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper indigo"},r.a.createElement(et,null,r.a.createElement("span",{onClick:function(){window.location="/"},style:{cursor:"pointer"},className:"brand-logo link"},"WDYF"),r.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},X()?St.filter((function(e){return"/dashboard/register"!==e.url})).filter((function(e){return"/dashboard/login"!==e.url})).map((function(e,t){return r.a.createElement("li",{key:e.name+t,className:"waves-effect "},r.a.createElement(o.b,{className:"white-text",activeClassName:Object(i.a)({"active-route":U(e.url)}),to:e.url},e.name))})):St.map((function(e,t){return r.a.createElement("li",{key:e.name+t,className:"waves-effect "},r.a.createElement(o.b,{className:"white-text",to:e.url,activeClassName:Object(i.a)({"active-route":U(e.url)}),exact:!0},e.name))}))),r.a.createElement("button",{"data-target":"mobile-nav",className:"sidenav-trigger hide-on-large-only"},r.a.createElement(u,{children:"menu",className:"white-text"}))))))},xt=function(e){var t=e.closeSidenav;return r.a.createElement(ze,{id:"mobile-nav",className:"sidenav white"},X()?St.filter((function(e){return"Register"!==e.name})).filter((function(e){return"Login"!==e.name})).map((function(e,a){return r.a.createElement(Le,{onClick:t,key:e.name+a,className:"waves-effect "},r.a.createElement(o.b,{activeClassName:Object(i.a)({active:U(e.url)}),to:e.url},e.icon,e.name))})):St.map((function(e,a){return r.a.createElement(Le,{onClick:t,key:e.name+a,className:"waves-effect "},r.a.createElement(o.b,{to:e.url,activeClassName:Object(i.a)({active:U(e.url)})},e.icon,e.name))})))},At=function(e){var t=e.children,a=r.a.useRef(null);r.a.useEffect((function(){var e=document.querySelectorAll(".sidenav");a.current=M.Sidenav.init(e)})),r.a.useEffect((function(){document.body.classList.remove("has-fixed-sidenav")}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(kt,null),r.a.createElement(xt,{closeSidenav:function(){a.current[0].close()}}),r.a.createElement(et,null,t),r.a.createElement(Ve,null))},Rt=function(){var e=Object(s.h)(),t=St.map((function(e,t){return r.a.createElement(s.b,{exact:!0,key:e.name+t,path:e.url,render:function(){return"/dashboard"===e.url&&X()&&te()&&function(){var e=localStorage.getItem("user_from_store");return e&&localStorage.removeItem("user_from_store"),!!e}()?r.a.createElement(s.a,{to:"/checkout"}):"/dashboard"===e.url||"/checkout"===e.url?X()&&te()?r.a.createElement(At,null,e.component):r.a.createElement(s.a,{to:"/login"}):void 0}})}));return r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/login",render:function(){return X()&&te()?r.a.createElement(s.a,{to:"/dashboard"}):r.a.createElement(mt,null)}}),r.a.createElement(s.b,{exact:!0,path:"/",render:function(){return r.a.createElement(s.a,{to:"/login"})}}),r.a.createElement(s.b,{exact:!0,path:"/register",render:function(){return X()&&te()?r.a.createElement(s.a,{to:"/dashboard"}):r.a.createElement(pt,null)}}),t,!ce(e)&&r.a.createElement(s.a,{to:"/login"}))};var Mt=function(){return r.a.createElement(o.a,null,r.a.createElement(Rt,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Mt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},95:function(e,t,a){e.exports=a(217)}},[[95,1,2]]]);
//# sourceMappingURL=main.7f5a287d.chunk.js.map